<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>World of Rigid Bodies (WoRB): WoRB::Collision Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">World of Rigid Bodies (WoRB)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_wo_r_b_1_1_collision.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">WoRB::Collision Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Encalpsulates a collision event between two bodies; contains contact details.  
 <a href="class_wo_r_b_1_1_collision.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_collision_8h_source.html">Collision.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for WoRB::Collision:</div>
<div class="dyncontent">
<div class="center"><img src="class_wo_r_b_1_1_collision__coll__graph.png" border="0" usemap="#_wo_r_b_1_1_collision_coll__map" alt="Collaboration graph"/></div>
<map name="_wo_r_b_1_1_collision_coll__map" id="_wo_r_b_1_1_collision_coll__map">
<area shape="rect" id="node2" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions." alt="" coords="21,331,202,1664"/><area shape="rect" id="node8" href="class_wo_r_b_1_1_rigid_body.html" title="Encapsulates a rigid body." alt="" coords="207,1870,405,3151"/><area shape="rect" id="node4" href="class_wo_r_b_1_1_q_tensor.html" title="Encapsulates a quaternionic tensor (q&#45;tensor) as a 4x4 row&#45;major matrix." alt="" coords="294,391,518,1603"/><area shape="rect" id="node6" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html" title="Represents tensor components in a column&#45;major order." alt="" coords="307,5,505,264"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Collision response methods</div></td></tr>
<tr class="memitem:ad52c6c02d632b087951826dd2d210798"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#ad52c6c02d632b087951826dd2d210798">UpdateDerivedQuantities</a> (double h)</td></tr>
<tr class="memdesc:ad52c6c02d632b087951826dd2d210798"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the derived quantities from the state data.  <a href="#ad52c6c02d632b087951826dd2d210798"></a><br/></td></tr>
<tr class="memitem:abfcda761eb795493d76e08d008918607"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#abfcda761eb795493d76e08d008918607">ImpulseTransfer</a> (<a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> V_jolt[2], <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> W_jolt[2])</td></tr>
<tr class="memdesc:abfcda761eb795493d76e08d008918607"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the linear &amp; angular impulses needed to resolve the collision.  <a href="#abfcda761eb795493d76e08d008918607"></a><br/></td></tr>
<tr class="memitem:af7a9334d8b0f9754dc9620f77ab6638f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#af7a9334d8b0f9754dc9620f77ab6638f">PositionProjection</a> (<a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> X_jolt[2], <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> Q_jolt[2], double relaxation)</td></tr>
<tr class="memdesc:af7a9334d8b0f9754dc9620f77ab6638f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the linear position jolt needed to resolve the collision.  <a href="#af7a9334d8b0f9754dc9620f77ab6638f"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Methods that calculates derived quantities</div></td></tr>
<tr class="memitem:a0027af08f2de42ba98da0ed608fd3e00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a0027af08f2de42ba98da0ed608fd3e00">GetImpulse</a> ()</td></tr>
<tr class="memdesc:a0027af08f2de42ba98da0ed608fd3e00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the impulse needed to resolve the collision without friction.  <a href="#a0027af08f2de42ba98da0ed608fd3e00"></a><br/></td></tr>
<tr class="memitem:a3466718291d1b0877340b8ecf46a88b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a3466718291d1b0877340b8ecf46a88b1">GetImpulse_IncludeFriction</a> ()</td></tr>
<tr class="memdesc:a3466718291d1b0877340b8ecf46a88b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the impulse needed to resolve the collision in general case.  <a href="#a3466718291d1b0877340b8ecf46a88b1"></a><br/></td></tr>
<tr class="memitem:a4fe1215213fce3d50ae387c16ecf2207"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a4fe1215213fce3d50ae387c16ecf2207">ActivateInactiveBodies</a> ()</td></tr>
<tr class="memdesc:a4fe1215213fce3d50ae387c16ecf2207"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activates (only) inactive bodies in a collision.  <a href="#a4fe1215213fce3d50ae387c16ecf2207"></a><br/></td></tr>
<tr class="memitem:a744228c8aa95f89e5d2574314dad7800"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a744228c8aa95f89e5d2574314dad7800">FindOrthonormalBasisAtContactPoint</a> ()</td></tr>
<tr class="memdesc:a744228c8aa95f89e5d2574314dad7800"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates an orthonormal basis for the contact point.  <a href="#a744228c8aa95f89e5d2574314dad7800"></a><br/></td></tr>
<tr class="memitem:a2706ed186be87da6ce2ba987e3925bf1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a2706ed186be87da6ce2ba987e3925bf1">GetRelativeVelocity</a> (<a class="el" href="class_wo_r_b_1_1_rigid_body.html">RigidBody</a> *body, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;relativePosition, double h)</td></tr>
<tr class="memdesc:a2706ed186be87da6ce2ba987e3925bf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the relative velocity for the point of contact on the given body.  <a href="#a2706ed186be87da6ce2ba987e3925bf1"></a><br/></td></tr>
<tr class="memitem:a8e2cc27d90e6226b04bab996e5e704d3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a8e2cc27d90e6226b04bab996e5e704d3">GetBouncingVelocity</a> (double h)</td></tr>
<tr class="memdesc:a8e2cc27d90e6226b04bab996e5e704d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the bouncing velocity required to resolve the collision.  <a href="#a8e2cc27d90e6226b04bab996e5e704d3"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Miscellaneous methods</div></td></tr>
<tr class="memitem:aa2830ae78aacb23b480d6e48642fcdde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#aa2830ae78aacb23b480d6e48642fcdde">Dump</a> (unsigned id, double currentTime) const </td></tr>
<tr class="memdesc:aa2830ae78aacb23b480d6e48642fcdde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays the collision state variables on standard output.  <a href="#aa2830ae78aacb23b480d6e48642fcdde"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Derived quantities</div></td></tr>
<tr class="memitem:ab601d1ce458cb38bc3ad8afc8ed480f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_q_tensor.html">QTensor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#ab601d1ce458cb38bc3ad8afc8ed480f1">ToWorld</a></td></tr>
<tr class="memdesc:ab601d1ce458cb38bc3ad8afc8ed480f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains a transformation matrix from body to world frame of reference.  <a href="#ab601d1ce458cb38bc3ad8afc8ed480f1"></a><br/></td></tr>
<tr class="memitem:a20868f2d8f5386fee4756bea3085c248"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248">Velocity</a></td></tr>
<tr class="memdesc:a20868f2d8f5386fee4756bea3085c248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the relative velocity v_A - v_B between bodies at the point of contact.  <a href="#a20868f2d8f5386fee4756bea3085c248"></a><br/></td></tr>
<tr class="memitem:a9cb1c0de6001e626740b17fcff44d64d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a9cb1c0de6001e626740b17fcff44d64d">BouncingVelocity</a></td></tr>
<tr class="memdesc:a9cb1c0de6001e626740b17fcff44d64d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the required change in velocity for this contact to be resolved.  <a href="#a9cb1c0de6001e626740b17fcff44d64d"></a><br/></td></tr>
<tr class="memitem:a3544a49b614ed725fde4879f15ed1c2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c">RelativePosition</a> [2]</td></tr>
<tr class="memdesc:a3544a49b614ed725fde4879f15ed1c2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the position of the contact point in world frame, relative to the center of each body.  <a href="#a3544a49b614ed725fde4879f15ed1c2c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a0cc23695af389c755f378ad8271ffccf"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a0cc23695af389c755f378ad8271ffccf">CollisionResolver</a></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Collision state variables</h2></td></tr>
<tr class="memitem:a168a9e9546b92b7ca87af98ed5d41ba1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_rigid_body.html">RigidBody</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1">Body_A</a></td></tr>
<tr class="memdesc:a168a9e9546b92b7ca87af98ed5d41ba1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the first rigid body that is involved in the collision.  <a href="#a168a9e9546b92b7ca87af98ed5d41ba1"></a><br/></td></tr>
<tr class="memitem:a1a0e0e492e2628745251738ecf4d1397"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_rigid_body.html">RigidBody</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397">Body_B</a></td></tr>
<tr class="memdesc:a1a0e0e492e2628745251738ecf4d1397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the second rigid body that is involved in the collision.  <a href="#a1a0e0e492e2628745251738ecf4d1397"></a><br/></td></tr>
<tr class="memitem:a1d92c8e565877791074421eb079a1bf3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a1d92c8e565877791074421eb079a1bf3">Position</a></td></tr>
<tr class="memdesc:a1d92c8e565877791074421eb079a1bf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the position of the contact in world frame of reference.  <a href="#a1d92c8e565877791074421eb079a1bf3"></a><br/></td></tr>
<tr class="memitem:a0115b5e8ad2c338bf23e77b379f994a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3">Normal</a></td></tr>
<tr class="memdesc:a0115b5e8ad2c338bf23e77b379f994a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the direction of the contact in world frame of reference.  <a href="#a0115b5e8ad2c338bf23e77b379f994a3"></a><br/></td></tr>
<tr class="memitem:a6a21575674b1f797e742a2f9862d29f0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a6a21575674b1f797e742a2f9862d29f0">Penetration</a></td></tr>
<tr class="memdesc:a6a21575674b1f797e742a2f9862d29f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the penetration depth at the point of contact.  <a href="#a6a21575674b1f797e742a2f9862d29f0"></a><br/></td></tr>
<tr class="memitem:aef2c3827aa2c587fbe4394d0debbea4b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#aef2c3827aa2c587fbe4394d0debbea4b">Restitution</a></td></tr>
<tr class="memdesc:aef2c3827aa2c587fbe4394d0debbea4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the position projections coefficient for this collision.  <a href="#aef2c3827aa2c587fbe4394d0debbea4b"></a><br/></td></tr>
<tr class="memitem:a20762eafac9a2f6eec3908013b194979"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979">Friction</a></td></tr>
<tr class="memdesc:a20762eafac9a2f6eec3908013b194979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the friction coefficient for this collision.  <a href="#a20762eafac9a2f6eec3908013b194979"></a><br/></td></tr>
<tr class="memitem:ad02dd44fc1e242ccf3f8dbce0ac617c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_collision.html#ad02dd44fc1e242ccf3f8dbce0ac617c1">WithScenery</a> () const </td></tr>
<tr class="memdesc:ad02dd44fc1e242ccf3f8dbce0ac617c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the collision is with scenery.  <a href="#ad02dd44fc1e242ccf3f8dbce0ac617c1"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Encalpsulates a collision event between two bodies; contains contact details. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00020">20</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4fe1215213fce3d50ae387c16ecf2207"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_wo_r_b_1_1_collision.html#a4fe1215213fce3d50ae387c16ecf2207">WoRB::Collision::ActivateInactiveBodies</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Activates (only) inactive bodies in a collision. </p>
<p>Collisions with the scenery (in case where body B is null) never cause a body to be activated. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00156">156</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>References <a class="el" href="_rigid_body_8h_source.html#l00343">WoRB::RigidBody::Activate()</a>, <a class="el" href="_collision_8h_source.html#l00030">Body_A</a>, <a class="el" href="_collision_8h_source.html#l00035">Body_B</a>, and <a class="el" href="_rigid_body_8h_source.html#l00335">WoRB::RigidBody::IsActive</a>.</p>

<p>Referenced by <a class="el" href="_impulse_method_8cpp_source.html#l00017">WoRB::CollisionResolver::ImpulseTransfers()</a>, and <a class="el" href="_position_projections_8cpp_source.html#l00017">WoRB::CollisionResolver::PositionProjections()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">if</span> ( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a> &amp;&amp; ( <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a4e00386843b276c531232f2b537fdc20" title="A body can be inactivated to avoid it being updated SolveODE or affected by collisions with the scene...">IsActive</a> ^ <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a4e00386843b276c531232f2b537fdc20" title="A body can be inactivated to avoid it being updated SolveODE or affected by collisions with the scene...">IsActive</a> ) )
            {
                <span class="keywordflow">if</span> ( <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a4e00386843b276c531232f2b537fdc20" title="A body can be inactivated to avoid it being updated SolveODE or affected by collisions with the scene...">IsActive</a> ) {
                    <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a31737e9c439cc1bfff373cc9e304db99" title="Allows body to move, i.e.">Activate</a> ();
                }
                <span class="keywordflow">else</span> {
                    <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a31737e9c439cc1bfff373cc9e304db99" title="Allows body to move, i.e.">Activate</a> ();
                }
            }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aa2830ae78aacb23b480d6e48642fcdde"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_wo_r_b_1_1_collision.html#aa2830ae78aacb23b480d6e48642fcdde">Collision::Dump</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>currentTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Displays the collision state variables on standard output. </p>

<p>Definition at line <a class="el" href="_wo_r_b_8cpp_source.html#l00024">24</a> of file <a class="el" href="_wo_r_b_8cpp_source.html">WoRB.cpp</a>.</p>

<p>References <a class="el" href="_collision_8h_source.html#l00134">BouncingVelocity</a>, <a class="el" href="_wo_r_b_8cpp_source.html#l00019">WoRB::Quaternion::Dump()</a>, <a class="el" href="_collision_8h_source.html#l00055">Friction</a>, <a class="el" href="_collision_8h_source.html#l00043">Normal</a>, <a class="el" href="_collision_8h_source.html#l00047">Penetration</a>, <a class="el" href="_collision_8h_source.html#l00039">Position</a>, <a class="el" href="_platform_8cpp_source.html#l00036">WoRB::Printf()</a>, <a class="el" href="_collision_8h_source.html#l00139">RelativePosition</a>, <a class="el" href="_collision_8h_source.html#l00051">Restitution</a>, and <a class="el" href="_collision_8h_source.html#l00129">Velocity</a>.</p>

<p>Referenced by <a class="el" href="_wo_r_b_8cpp_source.html#l00043">WoRB::CollisionResolver::Dump()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="namespace_wo_r_b.html#a1daf5df6226659812376d1cd23aa6d89" title="User defined ANSI C printf-style output routine.">Printf</a>( <span class="stringliteral">&quot;\nCollision %d: (COR = %g, mu = %g)\n&quot;</span>, <span class="keywordtype">id</span>, 
        <a class="code" href="class_wo_r_b_1_1_collision.html#aef2c3827aa2c587fbe4394d0debbea4b" title="Holds the position projections coefficient for this collision.">Restitution</a>, <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a> );

    <a class="code" href="namespace_wo_r_b.html#a1daf5df6226659812376d1cd23aa6d89" title="User defined ANSI C printf-style output routine.">Printf</a>( <span class="stringliteral">&quot;%10s : %12.4lf\n&quot;</span>, <span class="stringliteral">&quot;t&quot;</span>, currentTime );

    <a class="code" href="class_wo_r_b_1_1_collision.html#a1d92c8e565877791074421eb079a1bf3" title="Holds the position of the contact in world frame of reference.">Position</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a5111f73755592b2324af24513cb7e5aa">Dump</a>( <span class="stringliteral">&quot;X&quot;</span> );
    <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a5111f73755592b2324af24513cb7e5aa">Dump</a>( <span class="stringliteral">&quot;N&quot;</span> );

    <a class="code" href="namespace_wo_r_b.html#a1daf5df6226659812376d1cd23aa6d89" title="User defined ANSI C printf-style output routine.">Printf</a>( <span class="stringliteral">&quot;%10s : %12.4lf\n&quot;</span>, <span class="stringliteral">&quot;Pen&quot;</span>, <a class="code" href="class_wo_r_b_1_1_collision.html#a6a21575674b1f797e742a2f9862d29f0" title="Holds the penetration depth at the point of contact.">Penetration</a> );

    <a class="code" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248" title="Holds the relative velocity v_A - v_B between bodies at the point of contact.">Velocity</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a5111f73755592b2324af24513cb7e5aa">Dump</a>( <span class="stringliteral">&quot;V&quot;</span> );
    <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[0].<a class="code" href="class_wo_r_b_1_1_quaternion.html#a5111f73755592b2324af24513cb7e5aa">Dump</a>( <span class="stringliteral">&quot;X rel A&quot;</span> );
    <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[1].<a class="code" href="class_wo_r_b_1_1_quaternion.html#a5111f73755592b2324af24513cb7e5aa">Dump</a>( <span class="stringliteral">&quot;X rel B&quot;</span> );

    <a class="code" href="namespace_wo_r_b.html#a1daf5df6226659812376d1cd23aa6d89" title="User defined ANSI C printf-style output routine.">Printf</a>( <span class="stringliteral">&quot;%10s : %12.4lf\n&quot;</span>, <span class="stringliteral">&quot;B-Vel&quot;</span>, <a class="code" href="class_wo_r_b_1_1_collision.html#a9cb1c0de6001e626740b17fcff44d64d" title="Holds the required change in velocity for this contact to be resolved.">BouncingVelocity</a> );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a744228c8aa95f89e5d2574314dad7800"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_wo_r_b_1_1_collision.html#a744228c8aa95f89e5d2574314dad7800">WoRB::Collision::FindOrthonormalBasisAtContactPoint</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates an orthonormal basis for the contact point. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00171">171</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>References <a class="el" href="_collision_8h_source.html#l00043">Normal</a>, <a class="el" href="_quaternion_8h_source.html#l00121">WoRB::Quaternion::Normalize()</a>, <a class="el" href="_q_tensor_8h_source.html#l00164">WoRB::QTensor::SetColumnVectors()</a>, <a class="el" href="_collision_8h_source.html#l00125">ToWorld</a>, <a class="el" href="_quaternion_8h_source.html#l00040">WoRB::Quaternion::x</a>, <a class="el" href="_quaternion_8h_source.html#l00041">WoRB::Quaternion::y</a>, and <a class="el" href="_quaternion_8h_source.html#l00042">WoRB::Quaternion::z</a>.</p>

<p>Referenced by <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            Quaternion tangent_Y, tangent_Z;

            <span class="keywordflow">if</span> ( fabs( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> ) &gt; fabs( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> ) ) <span class="comment">// Z-axis is nearer to the Y axis</span>
            {
                <span class="keywordtype">double</span> length = 1.0 / sqrt( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> + <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> );

                <span class="comment">// The new X-axis is at right angles to the world Y-axis</span>
                tangent_Y.x =  <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> * length;
                tangent_Y.y =  0;
                tangent_Y.z = -<a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> * length;

                <span class="comment">// The new Y-axis is at right angles to the new X- and Z- axes</span>
                tangent_Z.x =  <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> * tangent_Y.x;
                tangent_Z.y =  <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> * tangent_Y.x - <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> * tangent_Y.z;
                tangent_Z.z = -<a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> * tangent_Y.x;
                tangent_Z.Normalize ();
            }
            <span class="keywordflow">else</span> <span class="comment">// Z-axis is nearer to the X axis</span>
            {
                <span class="keywordtype">double</span> length = 1.0 / sqrt( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> + <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> );

                <span class="comment">// The new X-axis is at right angles to the world X-axis</span>
                tangent_Y.x =  0;
                tangent_Y.y = -<a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> * length;
                tangent_Y.z =  <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> * length;

                <span class="comment">// The new Y-axis is at right angles to the new X- and Z- axes</span>
                tangent_Z.x =  <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> * tangent_Y.z - <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> * tangent_Y.y;
                tangent_Z.y = -<a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> * tangent_Y.z;
                tangent_Z.z =  <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> * tangent_Y.y;
                tangent_Z.Normalize ();
            }

            <span class="comment">/* Orthonormal basis is a 3x3 matrix, where each vector is a column. </span>
<span class="comment">             * The X-direction is generated from the contact normal, and the Y and Z</span>
<span class="comment">             * directions are set so they are at right angles to it.</span>
<span class="comment">             */</span>
            <a class="code" href="class_wo_r_b_1_1_collision.html#ab601d1ce458cb38bc3ad8afc8ed480f1" title="Contains a transformation matrix from body to world frame of reference.">ToWorld</a>.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#aaf2cea009bbd944ec1dd103c0500f9b6" title="Sets the q-tensor values from the given three vector components.">SetColumnVectors</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>, tangent_Y, tangent_Z );
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a8e2cc27d90e6226b04bab996e5e704d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_wo_r_b_1_1_collision.html#a8e2cc27d90e6226b04bab996e5e704d3">WoRB::Collision::GetBouncingVelocity</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates the bouncing velocity required to resolve the collision. </p>
<p>The bouncing velocity is <code>-( 1 + COR ) * NormalVelocity.x</code>. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>Time-step </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00247">247</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>References <a class="el" href="_collision_8h_source.html#l00030">Body_A</a>, <a class="el" href="_collision_8h_source.html#l00035">Body_B</a>, <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, <a class="el" href="_rigid_body_8h_source.html#l00122">WoRB::RigidBody::Force</a>, <a class="el" href="_rigid_body_8h_source.html#l00044">WoRB::RigidBody::InverseMass</a>, <a class="el" href="_rigid_body_8h_source.html#l00335">WoRB::RigidBody::IsActive</a>, <a class="el" href="_collision_8h_source.html#l00043">Normal</a>, <a class="el" href="_collision_8h_source.html#l00051">Restitution</a>, <a class="el" href="_collision_8h_source.html#l00129">Velocity</a>, and <a class="el" href="_quaternion_8h_source.html#l00040">WoRB::Quaternion::x</a>.</p>

<p>Referenced by <a class="el" href="_impulse_method_8cpp_source.html#l00017">WoRB::CollisionResolver::ImpulseTransfers()</a>, and <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="comment">// Calculate the normal component of the velocity induced by the force </span>
            <span class="comment">// accumulated in the last time step.</span>
            <span class="comment">//</span>
            <span class="keywordtype">double</span> dV_fromForce_x = 0;
            <span class="keywordflow">if</span> ( <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a4e00386843b276c531232f2b537fdc20" title="A body can be inactivated to avoid it being updated SolveODE or affected by collisions with the scene...">IsActive</a> )
            {
                Quaternion last_dV = <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#aafba896fb1abf935ee77257692a3c9bd" title="Holds the accumulated force to be applied at the next integration step.">Force</a> * h;
                dV_fromForce_x += last_dV.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> );
            }
            <span class="keywordflow">if</span> ( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a> &amp;&amp; <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a4e00386843b276c531232f2b537fdc20" title="A body can be inactivated to avoid it being updated SolveODE or affected by collisions with the scene...">IsActive</a> )
            {
                Quaternion last_dV = <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#aafba896fb1abf935ee77257692a3c9bd" title="Holds the accumulated force to be applied at the next integration step.">Force</a> * h;
                dV_fromForce_x -= last_dV.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> );
            }

            <span class="comment">// Limit the restitution in case when the velocity is very low.</span>
            <span class="comment">//</span>
            <span class="keywordtype">double</span> COR = fabs( <a class="code" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248" title="Holds the relative velocity v_A - v_B between bodies at the point of contact.">Velocity</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> - dV_fromForce_x ) &lt; 0.25 ? 0.0 : <a class="code" href="class_wo_r_b_1_1_collision.html#aef2c3827aa2c587fbe4394d0debbea4b" title="Holds the position projections coefficient for this collision.">Restitution</a>;

            <span class="comment">// The result is the bouncing-velocity, reduced for the velocity that was</span>
            <span class="comment">// induced by the force exerted in the last time-step.</span>
            <span class="comment">//</span>
            <span class="keywordflow">return</span> - ( 1 + COR ) * <a class="code" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248" title="Holds the relative velocity v_A - v_B between bodies at the point of contact.">Velocity</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> + COR * dV_fromForce_x;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a0027af08f2de42ba98da0ed608fd3e00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> <a class="el" href="class_wo_r_b_1_1_collision.html#a0027af08f2de42ba98da0ed608fd3e00">Collision::GetImpulse</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates the impulse needed to resolve the collision without friction. </p>

<p>Definition at line <a class="el" href="_impulse_method_8cpp_source.html#l00143">143</a> of file <a class="el" href="_impulse_method_8cpp_source.html">ImpulseMethod.cpp</a>.</p>

<p>References <a class="el" href="_collision_8h_source.html#l00030">Body_A</a>, <a class="el" href="_collision_8h_source.html#l00035">Body_B</a>, <a class="el" href="_collision_8h_source.html#l00134">BouncingVelocity</a>, <a class="el" href="_quaternion_8h_source.html#l00297">WoRB::Quaternion::Cross()</a>, <a class="el" href="_rigid_body_8h_source.html#l00079">WoRB::RigidBody::InverseInertiaWorld</a>, <a class="el" href="_rigid_body_8h_source.html#l00044">WoRB::RigidBody::InverseMass</a>, <a class="el" href="_collision_8h_source.html#l00043">Normal</a>, and <a class="el" href="_collision_8h_source.html#l00139">RelativePosition</a>.</p>

<p>Referenced by <a class="el" href="_impulse_method_8cpp_source.html#l00102">ImpulseTransfer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Build a vector that shows the change in velocity in world space for </span>
    <span class="comment">// a unit impulse in the direction of the contact normal, then calculate the change </span>
    <span class="comment">// in velocity in contact coordiantes, adding also the linear component of </span>
    <span class="comment">// velocity jolt (body inverse mass 1/M).</span>
    <span class="comment">//</span>
    <span class="comment">// Equation (8-18) in </span>
    <span class="comment">// Baraff, David - Physically Based Modeling, Rigid Body Simulation</span>
    <span class="comment">//</span>
    <span class="comment">//                 - ( 1 + COR ) * Velocity.x                     Bouncing velocity</span>
    <span class="comment">// j =  ------------------------------------------------------ = -------------------</span>
    <span class="comment">//       Sum( m^-1 + [ ( I_world^-1  ( r × N ) ) x r ]  N )     Inv. reduced mass</span>
    <span class="comment">//</span>

    <span class="comment">// First, calculate:</span>
    <span class="comment">// iMass = Sum( m^-1 + ( ( I_world^-1  ( r × N ) ) x r )  N ) for each body</span>
    <span class="comment">//</span>
    <span class="keywordtype">double</span> invRedMass = 0;
    
    invRedMass += <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a>;
    invRedMass += ( <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#aa4cc0874d236722c81321cde5f3c8146" title="Holds the inverse inertia tensor of the body in world space.">InverseInertiaWorld</a> 
                    * ( <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[0].<a class="code" href="class_wo_r_b_1_1_quaternion.html#af5296e5e0db5729772045e5b26d907be" title="Returns a vector product of the vector parts of this and another quaternion.">Cross</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> ) )
                  ).Cross( <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[0] ).Dot( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> );

    <span class="keywordflow">if</span> ( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a> ) {
        invRedMass += <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a>;
        invRedMass += ( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#aa4cc0874d236722c81321cde5f3c8146" title="Holds the inverse inertia tensor of the body in world space.">InverseInertiaWorld</a> 
                        * ( <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[1].<a class="code" href="class_wo_r_b_1_1_quaternion.html#af5296e5e0db5729772045e5b26d907be" title="Returns a vector product of the vector parts of this and another quaternion.">Cross</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> ) )
                      ).Cross( <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[1] ).Dot( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> );
    }

    <span class="comment">// Finally, return the correct sized impulse in the contact frame of reference</span>
    <span class="comment">// along the contact normal (= X-component). </span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span> <a class="code" href="class_wo_r_b_1_1_spatial_vector.html" title="Encapsulates a spatial vector.">SpatialVector</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a9cb1c0de6001e626740b17fcff44d64d" title="Holds the required change in velocity for this contact to be resolved.">BouncingVelocity</a> / invRedMass, 0, 0 );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3466718291d1b0877340b8ecf46a88b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> <a class="el" href="class_wo_r_b_1_1_collision.html#a3466718291d1b0877340b8ecf46a88b1">Collision::GetImpulse_IncludeFriction</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates the impulse needed to resolve the collision in general case. </p>

<p>Definition at line <a class="el" href="_impulse_method_8cpp_source.html#l00181">181</a> of file <a class="el" href="_impulse_method_8cpp_source.html">ImpulseMethod.cpp</a>.</p>

<p>References <a class="el" href="_collision_8h_source.html#l00030">Body_A</a>, <a class="el" href="_collision_8h_source.html#l00035">Body_B</a>, <a class="el" href="_collision_8h_source.html#l00134">BouncingVelocity</a>, <a class="el" href="_collision_8h_source.html#l00055">Friction</a>, <a class="el" href="_q_tensor_8h_source.html#l00509">WoRB::QTensor::Inverse()</a>, <a class="el" href="_rigid_body_8h_source.html#l00079">WoRB::RigidBody::InverseInertiaWorld</a>, <a class="el" href="_rigid_body_8h_source.html#l00044">WoRB::RigidBody::InverseMass</a>, <a class="el" href="_q_tensor_8h_source.html#l00060">WoRB::QTensor::m</a>, <a class="el" href="_collision_8h_source.html#l00139">RelativePosition</a>, <a class="el" href="_q_tensor_8h_source.html#l00178">WoRB::QTensor::SetSkewSymmetric()</a>, <a class="el" href="_collision_8h_source.html#l00125">ToWorld</a>, <a class="el" href="_q_tensor_8h_source.html#l00531">WoRB::QTensor::TransformInverse()</a>, <a class="el" href="_collision_8h_source.html#l00129">Velocity</a>, <a class="el" href="_quaternion_8h_source.html#l00040">WoRB::Quaternion::x</a>, <a class="el" href="_q_tensor_8h_source.html#l00049">WoRB::QTensor::Components::xx</a>, <a class="el" href="_q_tensor_8h_source.html#l00050">WoRB::QTensor::Components::xy</a>, <a class="el" href="_q_tensor_8h_source.html#l00051">WoRB::QTensor::Components::xz</a>, <a class="el" href="_quaternion_8h_source.html#l00041">WoRB::Quaternion::y</a>, <a class="el" href="_q_tensor_8h_source.html#l00050">WoRB::QTensor::Components::yy</a>, <a class="el" href="_quaternion_8h_source.html#l00042">WoRB::Quaternion::z</a>, and <a class="el" href="_q_tensor_8h_source.html#l00051">WoRB::QTensor::Components::zz</a>.</p>

<p>Referenced by <a class="el" href="_impulse_method_8cpp_source.html#l00102">ImpulseTransfer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Build the matrix for converting between linear and angular quantities.</span>
    <span class="comment">// (Multiplying by a skew symmetrix matrix is equivalent to a cross product.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_q_tensor.html" title="Encapsulates a quaternionic tensor (q-tensor) as a 4x4 row-major matrix.">QTensor</a> crossR;
    crossR.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a8edd9eab10e15cbfb02217d0486dc209" title="Sets the matrix to be a skew symmetric matrix based on the given quaternion.">SetSkewSymmetric</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[0] );

    <span class="comment">// Build the matrix to convert contact impulse to change in velocity</span>
    <span class="comment">// in world coordinates.</span>
    <span class="comment">//</span>
    <span class="comment">// dV_world = - ( r × I_world^-1 ) × r</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_q_tensor.html" title="Encapsulates a quaternionic tensor (q-tensor) as a 4x4 row-major matrix.">QTensor</a> delta_V_world = -( crossR * <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#aa4cc0874d236722c81321cde5f3c8146" title="Holds the inverse inertia tensor of the body in world space.">InverseInertiaWorld</a> * crossR );

    <span class="comment">// Do the same for the second body</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a> )
    {
        <span class="comment">// Calculate the velocity jolt matrix for body B and sum with the velocity</span>
        <span class="comment">// jolt for body A</span>
        <span class="comment">//</span>
        <span class="comment">// dV_world = - ( r_a × I_a_world^-1 ) × r_a - ( r_b × I_b_world^-1 ) × r_b</span>
        <span class="comment">//</span>
        crossR.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a8edd9eab10e15cbfb02217d0486dc209" title="Sets the matrix to be a skew symmetric matrix based on the given quaternion.">SetSkewSymmetric</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[1] ); <span class="comment">// cross product matrix</span>
        delta_V_world += -( crossR * <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#aa4cc0874d236722c81321cde5f3c8146" title="Holds the inverse inertia tensor of the body in world space.">InverseInertiaWorld</a> * crossR );
    }

    <span class="comment">// Do a change of basis to convert into contact coordinates.</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_q_tensor.html" title="Encapsulates a quaternionic tensor (q-tensor) as a 4x4 row-major matrix.">QTensor</a> delta_V_contact = <a class="code" href="class_wo_r_b_1_1_collision.html#ab601d1ce458cb38bc3ad8afc8ed480f1" title="Contains a transformation matrix from body to world frame of reference.">ToWorld</a>.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a447b71f89e6ab80bd4522643d7e36183" title="Transform the given quaternion by the inverse of this matrix.">TransformInverse</a>( delta_V_world );

    <span class="comment">// Include the linear effects of the inverse reduced mass m_ab^-1</span>
    <span class="comment">//</span>
    <span class="comment">// m_ab^-1 = m_a^-1 + m_b^-1</span>
    <span class="comment">//</span>
    <span class="keywordtype">double</span> inverseReducedMass = 
        <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a> + ( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a> ? <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a> : 0.0 );

    delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#af3a626c2d88616c7f44658b876067978">xx</a> += inverseReducedMass;
    delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#a745961868e28e4d0ec674c94228d2e42">yy</a> += inverseReducedMass;
    delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#a5945d44d9102f4cb570ed00ad4b5e4ca">zz</a> += inverseReducedMass;

    <span class="keywordflow">if</span> ( <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a> == 0 ) {
        <span class="keywordflow">return</span> <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a>( 0, <a class="code" href="class_wo_r_b_1_1_collision.html#a9cb1c0de6001e626740b17fcff44d64d" title="Holds the required change in velocity for this contact to be resolved.">BouncingVelocity</a> / delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#af3a626c2d88616c7f44658b876067978">xx</a>, 0, 0 );
    }

    <span class="comment">// For static friction we should just remove tangential components.</span>
    <span class="comment">//</span>
<span class="preprocessor">    #if 0</span>
<span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a>( 0,
            <a class="code" href="class_wo_r_b_1_1_collision.html#a9cb1c0de6001e626740b17fcff44d64d" title="Holds the required change in velocity for this contact to be resolved.">BouncingVelocity</a> / delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#af3a626c2d88616c7f44658b876067978">xx</a>, 
            -<a class="code" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248" title="Holds the relative velocity v_A - v_B between bodies at the point of contact.">Velocity</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> / delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#a745961868e28e4d0ec674c94228d2e42">yy</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a>, 
            -<a class="code" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248" title="Holds the relative velocity v_A - v_B between bodies at the point of contact.">Velocity</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> / delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#a5945d44d9102f4cb570ed00ad4b5e4ca">zz</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a>
        );
<span class="preprocessor">    #endif</span>
<span class="preprocessor"></span>
    <span class="comment">// Find the target normal &amp; tangential velocities to remove</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> target_V( 0, <a class="code" href="class_wo_r_b_1_1_collision.html#a9cb1c0de6001e626740b17fcff44d64d" title="Holds the required change in velocity for this contact to be resolved.">BouncingVelocity</a>, -<a class="code" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248" title="Holds the relative velocity v_A - v_B between bodies at the point of contact.">Velocity</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a>, -<a class="code" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248" title="Holds the relative velocity v_A - v_B between bodies at the point of contact.">Velocity</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> );

    <span class="comment">// Find the impulse to remove target velocities in contact frame of reference</span>
    <span class="comment">// (multiplying by dV^-1 we get the impulse needed per unit velocity)</span>
    <span class="comment">//</span>
    <span class="comment">// dV = m_a^-1 + m_b^-1 </span>
    <span class="comment">//    + ToContact  [                           &lt;-- ToContact == ToWorld^-1</span>
    <span class="comment">//            - ( r_a × I_a_world^-1 ) × r_a</span>
    <span class="comment">//            - ( r_b × I_b_world^-1 ) × r_b</span>
    <span class="comment">//      ]</span>
    <span class="comment">//</span>
    <span class="comment">// J = dV^-1  { -( 1 + COR ) * V.x, - V.y, - V.z }</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> J = delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a96e7545827d8f4ed53d407043ed99ef6" title="Returns a new matrix containing the inverse of this matrix.">Inverse</a> () * target_V;
    
    <span class="comment">// Use dynamic friction in case of an exceeding friction.</span>
    <span class="comment">//</span>
    <span class="keywordtype">double</span> J_tangential = sqrt( J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> * J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> + J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> * J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> ); <span class="comment">// tangential component</span>

    <span class="keywordflow">if</span> ( J_tangential &gt; J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a> ) <span class="comment">// if excceding friction</span>
    {
        <span class="comment">// Normalize tangential components</span>
        J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> /= J_tangential;
        J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> /= J_tangential;

        <span class="comment">// Recalculate impuls</span>
        <span class="keywordtype">double</span> invm = delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#af3a626c2d88616c7f44658b876067978">xx</a>  
                    + delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#aabea48fc1c3ec900c1f3d8949db27590">xy</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a> * J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> 
                    + delta_V_contact.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a617e7e67e7bd192b5060cc1266147453" title="Holds the tensor components as a column-major matrix.">m</a>.<a class="code" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html#a8089b12db7b064e23077d60a690a90a5">xz</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a> * J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a>;
        <span class="keywordtype">double</span> j_normal = <a class="code" href="class_wo_r_b_1_1_collision.html#a9cb1c0de6001e626740b17fcff44d64d" title="Holds the required change in velocity for this contact to be resolved.">BouncingVelocity</a> / invm;

        <span class="comment">// Reduce friction for the given amount.</span>
        J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> = j_normal;
        J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> *= <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a> * j_normal;
        J.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> *= <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a> * j_normal;
    }

    <span class="keywordflow">return</span> J;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2706ed186be87da6ce2ba987e3925bf1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> <a class="el" href="class_wo_r_b_1_1_collision.html#a2706ed186be87da6ce2ba987e3925bf1">WoRB::Collision::GetRelativeVelocity</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_rigid_body.html">RigidBody</a> *&#160;</td>
          <td class="paramname"><em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>relativePosition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the relative velocity for the point of contact on the given body. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">body</td><td>The pointer to the rigid body </td></tr>
    <tr><td class="paramname">relativePosition</td><td>Relative position to the contact </td></tr>
    <tr><td class="paramname">h</td><td>The last time-step </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00215">215</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>References <a class="el" href="_rigid_body_8h_source.html#l00087">WoRB::RigidBody::AngularVelocity</a>, <a class="el" href="_quaternion_8h_source.html#l00297">WoRB::Quaternion::Cross()</a>, <a class="el" href="_rigid_body_8h_source.html#l00122">WoRB::RigidBody::Force</a>, <a class="el" href="_rigid_body_8h_source.html#l00044">WoRB::RigidBody::InverseMass</a>, <a class="el" href="_collision_8h_source.html#l00125">ToWorld</a>, <a class="el" href="_q_tensor_8h_source.html#l00531">WoRB::QTensor::TransformInverse()</a>, <a class="el" href="_rigid_body_8h_source.html#l00083">WoRB::RigidBody::Velocity</a>, and <a class="el" href="_quaternion_8h_source.html#l00040">WoRB::Quaternion::x</a>.</p>

<p>Referenced by <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="comment">// Calculate the velocity of the contact point in contact coordinates</span>
            <span class="comment">//</span>
            Quaternion V_world = body-&gt;Velocity 
                               + body-&gt;AngularVelocity.Cross( relativePosition );

            Quaternion V = <a class="code" href="class_wo_r_b_1_1_collision.html#ab601d1ce458cb38bc3ad8afc8ed480f1" title="Contains a transformation matrix from body to world frame of reference.">ToWorld</a>.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a447b71f89e6ab80bd4522643d7e36183" title="Transform the given quaternion by the inverse of this matrix.">TransformInverse</a>( V_world );

            <span class="comment">// Calculate the ammount of velocity that is due to forces without reactions,</span>
            <span class="comment">// ignoring any component of acceleration in the contact normal direction </span>
            <span class="comment">// (where only tangential/planar components are considered)</span>
            <span class="comment">//</span>
            Quaternion dV_world = body-&gt;InverseMass * body-&gt;Force * h;

            Quaternion dV = <a class="code" href="class_wo_r_b_1_1_collision.html#ab601d1ce458cb38bc3ad8afc8ed480f1" title="Contains a transformation matrix from body to world frame of reference.">ToWorld</a>.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a447b71f89e6ab80bd4522643d7e36183" title="Transform the given quaternion by the inverse of this matrix.">TransformInverse</a>( dV_world );

            dV.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> = 0; <span class="comment">// consider only tangential components</span>

            <span class="comment">// Add the tangential velocities (they will removed during the impulse</span>
            <span class="comment">// transfer, if there&#39;s enough friction).</span>
            <span class="comment">//</span>
            <span class="keywordflow">return</span> V + dV;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="abfcda761eb795493d76e08d008918607"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_wo_r_b_1_1_collision.html#abfcda761eb795493d76e08d008918607">Collision::ImpulseTransfer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td>
          <td class="paramname"><em>V_jolt</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td>
          <td class="paramname"><em>W_jolt</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Applies the linear &amp; angular impulses needed to resolve the collision. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">V_jolt</td><td>Returned applied velocity jolt </td></tr>
    <tr><td class="paramname">W_jolt</td><td>Returned applied angular velocity jolt </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_impulse_method_8cpp_source.html#l00102">102</a> of file <a class="el" href="_impulse_method_8cpp_source.html">ImpulseMethod.cpp</a>.</p>

<p>References <a class="el" href="_rigid_body_8h_source.html#l00064">WoRB::RigidBody::AngularMomentum</a>, <a class="el" href="_collision_8h_source.html#l00030">Body_A</a>, <a class="el" href="_collision_8h_source.html#l00035">Body_B</a>, <a class="el" href="_quaternion_8h_source.html#l00297">WoRB::Quaternion::Cross()</a>, <a class="el" href="_collision_8h_source.html#l00055">Friction</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00143">GetImpulse()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00181">GetImpulse_IncludeFriction()</a>, <a class="el" href="_rigid_body_8h_source.html#l00079">WoRB::RigidBody::InverseInertiaWorld</a>, <a class="el" href="_rigid_body_8h_source.html#l00044">WoRB::RigidBody::InverseMass</a>, <a class="el" href="_rigid_body_8h_source.html#l00060">WoRB::RigidBody::LinearMomentum</a>, <a class="el" href="_collision_8h_source.html#l00139">RelativePosition</a>, and <a class="el" href="_collision_8h_source.html#l00125">ToWorld</a>.</p>

<p>Referenced by <a class="el" href="_impulse_method_8cpp_source.html#l00017">WoRB::CollisionResolver::ImpulseTransfers()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Get the collision impulse in contact frame of reference</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> J_contact = <a class="code" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979" title="Holds the friction coefficient for this collision.">Friction</a> == 0
        ? <a class="code" href="class_wo_r_b_1_1_collision.html#a0027af08f2de42ba98da0ed608fd3e00" title="Calculates the impulse needed to resolve the collision without friction.">GetImpulse</a> ()  <span class="comment">// Use the simplifed version in case of frictionless contacts</span>
        : <a class="code" href="class_wo_r_b_1_1_collision.html#a3466718291d1b0877340b8ecf46a88b1" title="Calculates the impulse needed to resolve the collision in general case.">GetImpulse_IncludeFriction</a> ();  <span class="comment">// The fuull version including friction</span>

    <span class="comment">// Convert impulse to world space, then split it into linear and angular components</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> J        = <a class="code" href="class_wo_r_b_1_1_collision.html#ab601d1ce458cb38bc3ad8afc8ed480f1" title="Contains a transformation matrix from body to world frame of reference.">ToWorld</a>( J_contact );
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> J_torque = <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[0].<a class="code" href="class_wo_r_b_1_1_quaternion.html#af5296e5e0db5729772045e5b26d907be" title="Returns a vector product of the vector parts of this and another quaternion.">Cross</a>( J );

    <span class="comment">// Apply the jolts on the first body</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ac71747daba2769951cdf91b6eab4cbfa" title="Holds the linear momentum of the rigid body in world space.">LinearMomentum</a>  += J;
    <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a46b32949722d0f80a52c3b99bf4e2569" title="Holds the angular momentum of the rigid body in world space.">AngularMomentum</a> += J_torque;

    V_jolt[0] = <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a> * J;
    W_jolt[0] = <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#aa4cc0874d236722c81321cde5f3c8146" title="Holds the inverse inertia tensor of the body in world space.">InverseInertiaWorld</a> * J_torque;

    <span class="comment">// Apply the jolts on the second body, if it&#39;s not a scenery</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a> ) 
    {
        J_torque = <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[1].<a class="code" href="class_wo_r_b_1_1_quaternion.html#af5296e5e0db5729772045e5b26d907be" title="Returns a vector product of the vector parts of this and another quaternion.">Cross</a>( J );

        <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ac71747daba2769951cdf91b6eab4cbfa" title="Holds the linear momentum of the rigid body in world space.">LinearMomentum</a>  -= J;
        <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a46b32949722d0f80a52c3b99bf4e2569" title="Holds the angular momentum of the rigid body in world space.">AngularMomentum</a> -= J_torque;

        V_jolt[1] = -( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a> * J );
        W_jolt[1] = -( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#aa4cc0874d236722c81321cde5f3c8146" title="Holds the inverse inertia tensor of the body in world space.">InverseInertiaWorld</a> * J_torque );
    }

    <span class="comment">// Note: The linear and the angular velocity will be derived later</span>
    <span class="comment">// in RigidBody::CalculateDerivedQuantities() method.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="af7a9334d8b0f9754dc9620f77ab6638f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_wo_r_b_1_1_collision.html#af7a9334d8b0f9754dc9620f77ab6638f">Collision::PositionProjection</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td>
          <td class="paramname"><em>X_jolt</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td>
          <td class="paramname"><em>Q_jolt</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>relaxation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Applies the linear position jolt needed to resolve the collision. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">X_jolt</td><td>Returned applied position jolt </td></tr>
    <tr><td class="paramname">Q_jolt</td><td>Returned applied orientation jolt </td></tr>
    <tr><td class="paramname">relaxation</td><td>Position projections relaxation coefficient </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_position_projections_8cpp_source.html#l00088">88</a> of file <a class="el" href="_position_projections_8cpp_source.html">PositionProjections.cpp</a>.</p>

<p>References <a class="el" href="_collision_8h_source.html#l00030">Body_A</a>, <a class="el" href="_rigid_body_8h_source.html#l00221">WoRB::RigidBody::CalculateDerivedQuantities()</a>, <a class="el" href="_quaternion_8h_source.html#l00297">WoRB::Quaternion::Cross()</a>, <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, <a class="el" href="_quaternion_8h_source.html#l00208">WoRB::Quaternion::ImNorm()</a>, <a class="el" href="_rigid_body_8h_source.html#l00079">WoRB::RigidBody::InverseInertiaWorld</a>, <a class="el" href="_rigid_body_8h_source.html#l00044">WoRB::RigidBody::InverseMass</a>, <a class="el" href="_collision_8h_source.html#l00043">Normal</a>, <a class="el" href="_rigid_body_8h_source.html#l00056">WoRB::RigidBody::Orientation</a>, <a class="el" href="_collision_8h_source.html#l00047">Penetration</a>, <a class="el" href="_rigid_body_8h_source.html#l00052">WoRB::RigidBody::Position</a>, and <a class="el" href="_collision_8h_source.html#l00139">RelativePosition</a>.</p>

<p>Referenced by <a class="el" href="_position_projections_8cpp_source.html#l00017">WoRB::CollisionResolver::PositionProjections()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_wo_r_b_1_1_rigid_body.html" title="Encapsulates a rigid body.">RigidBody</a>** Body = &amp;<a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>;

    <span class="comment">// We need to work out the inertia of each object in the direction</span>
    <span class="comment">// of the contact normal, due to angular inertia only.</span>
    <span class="comment">//</span>
    <span class="keywordtype">double</span> inverseTotalInertia = 0;
    <a class="code" href="class_wo_r_b_1_1_q_tensor.html" title="Encapsulates a quaternionic tensor (q-tensor) as a 4x4 row-major matrix.">QTensor</a> inverse_I_world[2];
    <span class="keywordtype">double</span> inverseAngInertia[2];

    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> i = 0; i &lt; 2; ++i ) 
    {
        <span class="keywordflow">if</span> ( ! Body[i] ) {
            <span class="keywordflow">continue</span>;
        }

        inverse_I_world[i] = Body[i]-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#aa4cc0874d236722c81321cde5f3c8146" title="Holds the inverse inertia tensor of the body in world space.">InverseInertiaWorld</a>;

        <span class="comment">// Calculate the angular component of total inertia:</span>
        <span class="comment">// angI = ( ( I_world^-1  ( r × N ) ) × r )  N</span>
        <span class="comment">//</span>
        inverseAngInertia[i] = 
            ( inverse_I_world[i] * <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[i].<a class="code" href="class_wo_r_b_1_1_quaternion.html#af5296e5e0db5729772045e5b26d907be" title="Returns a vector product of the vector parts of this and another quaternion.">Cross</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> ) )
            .Cross( <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[i] )
            .Dot( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> );

        <span class="comment">// The total inertia is sum of its linear and angular components:</span>
        <span class="comment">// 1/m_tot = 1/m_linear + 1/m_angular;</span>
        <span class="comment">//</span>
        inverseTotalInertia += Body[i]-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a> + inverseAngInertia[i];
    }

    <span class="comment">// Loop through again calculating and applying the changes</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> i = 0; i &lt; 2; ++i ) 
    {
        <span class="keywordflow">if</span> ( ! Body[i]) {
            <span class="keywordflow">continue</span>;
        }

        <span class="comment">// Calculate required linear (delta_X) and angular movements (delta_Q) </span>
        <span class="comment">// in proportion to the two mass and angular inertias</span>
        <span class="comment">//</span>
        <span class="keywordtype">double</span> penetration = i == 0 ? <a class="code" href="class_wo_r_b_1_1_collision.html#a6a21575674b1f797e742a2f9862d29f0" title="Holds the penetration depth at the point of contact.">Penetration</a> : -<a class="code" href="class_wo_r_b_1_1_collision.html#a6a21575674b1f797e742a2f9862d29f0" title="Holds the penetration depth at the point of contact.">Penetration</a>;
        <span class="keywordflow">if</span> ( 0.0 &lt; relaxation &amp;&amp; relaxation &lt;= 1.0 ) {
            penetration *= ( 1 - relaxation );
        }
        <span class="keywordtype">double</span> delta_X = penetration * ( Body[i]-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a12c7d686532f0ab8860fd227d5bfd544" title="Holds the inverse of the mass of the rigid body.">InverseMass</a> / inverseTotalInertia );
        <span class="keywordtype">double</span> delta_Q = penetration * ( inverseAngInertia[i] / inverseTotalInertia );

        <span class="comment">// Limit the angular jolt to avoid angular projections that are too great </span>
        <span class="comment">// (case when mass is large and inertia tensor is small).</span>
        {
            <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> angularProjection = 
                <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[i] - <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> * <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[i].<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> );

            <span class="keyword">const</span> <span class="keywordtype">double</span> Q_limit = 0.3;
            <span class="keywordtype">double</span> max_Q = Q_limit * angularProjection.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a3c38c079f207c8295420942f746a2089" title="Gets the magnitude of the vector part of this quaternion.">ImNorm</a> ();

            <span class="keywordflow">if</span> ( delta_Q &lt; -max_Q )
            {
                delta_X = ( delta_X + delta_Q ) + max_Q;
                delta_Q = -max_Q;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( delta_Q &gt; max_Q )
            {
                delta_X = ( delta_X + delta_Q ) - max_Q;
                delta_Q = max_Q;
            }
        }

        <span class="comment">// Calculate and apply the position jolt from the required linear movement</span>
        <span class="comment">// delta_X, which is a simple linear movement along the contact normal.</span>
        <span class="comment">//</span>
        X_jolt[i] = <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> * delta_X;
        Body[i]-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ae188cac475b4b6a4d932c6e507160f44" title="Holds the linear position of the rigid body in world space.">Position</a> += X_jolt[i];

        <span class="comment">// Calculate the required angular jolt to achieve angular movement delta_Q</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> ( delta_Q == 0 )  <span class="comment">// No angular movement = no orientation jolt</span>
        {
            Q_jolt[i]= 0;
        }
        <span class="keywordflow">else</span> <span class="comment">// a bit more complicated orientation jolt</span>
        { 
            <span class="comment">//                  I_world^-1  ( r × N ) </span>
            <span class="comment">// Q_jolt = ---------------------------------------- * delta_Q</span>
            <span class="comment">//           ( ( I_world^-1  ( r × N ) ) × r )  N</span>
            <span class="comment">//</span>
            Q_jolt[i] = inverse_I_world[i] 
                      * <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[i].<a class="code" href="class_wo_r_b_1_1_quaternion.html#af5296e5e0db5729772045e5b26d907be" title="Returns a vector product of the vector parts of this and another quaternion.">Cross</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> ) 
                      * ( delta_Q / inverseAngInertia[i] );

            Body[i]-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a7f5e3a855d14a7f74b3cfaf752e93eab" title="Holds the angular orientation of the rigid body in world space.">Orientation</a> += 0.5 * Q_jolt[i] * Body[i]-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a7f5e3a855d14a7f74b3cfaf752e93eab" title="Holds the angular orientation of the rigid body in world space.">Orientation</a>;

            <span class="comment">// Now, normalize orientation and recalculate transformation matrix</span>
            <span class="comment">//</span>
            Body[i]-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a09e549a786fcb43c9add018c75d9454f" title="Normalizes orientation and calculates derived quantities from the state variables.">CalculateDerivedQuantities</a> (); 
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad52c6c02d632b087951826dd2d210798"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_wo_r_b_1_1_collision.html#ad52c6c02d632b087951826dd2d210798">WoRB::Collision::UpdateDerivedQuantities</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the derived quantities from the state data. </p>
<dl class="section note"><dt>Note:</dt><dd>Should be called before the collision response algorithm executes. </dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>Time-step </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00072">72</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>References <a class="el" href="_collision_8h_source.html#l00030">Body_A</a>, <a class="el" href="_collision_8h_source.html#l00035">Body_B</a>, <a class="el" href="_collision_8h_source.html#l00134">BouncingVelocity</a>, <a class="el" href="_collision_8h_source.html#l00171">FindOrthonormalBasisAtContactPoint()</a>, <a class="el" href="_collision_8h_source.html#l00247">GetBouncingVelocity()</a>, <a class="el" href="_collision_8h_source.html#l00215">GetRelativeVelocity()</a>, <a class="el" href="_collision_8h_source.html#l00043">Normal</a>, <a class="el" href="_collision_8h_source.html#l00039">Position</a>, <a class="el" href="_rigid_body_8h_source.html#l00052">WoRB::RigidBody::Position</a>, <a class="el" href="_collision_8h_source.html#l00139">RelativePosition</a>, and <a class="el" href="_collision_8h_source.html#l00129">Velocity</a>.</p>

<p>Referenced by <a class="el" href="_collision_resolver_8h_source.html#l00159">WoRB::CollisionResolver::UpdateDerivedQuantities()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">if</span> ( ! <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a> ) <span class="comment">// Reverse the contact and swap the bodies</span>
            {
                <a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a> = -<a class="code" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3" title="Holds the direction of the contact in world frame of reference.">Normal</a>; <span class="comment">// Reverse the contact normal</span>

                RigidBody* temp = <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>; <span class="comment">// Swap bodies</span>
                <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a> = <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>; 
                <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a> = temp;
            }

            <span class="comment">// Calculate an set of axis at the point of contact.</span>
            <span class="comment">//</span>
            <a class="code" href="class_wo_r_b_1_1_collision.html#a744228c8aa95f89e5d2574314dad7800" title="Calculates an orthonormal basis for the contact point.">FindOrthonormalBasisAtContactPoint</a> ();

            <span class="comment">// Find the relative position and velocity relative to each body</span>
            <span class="comment">//</span>
            <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[0] = <a class="code" href="class_wo_r_b_1_1_collision.html#a1d92c8e565877791074421eb079a1bf3" title="Holds the position of the contact in world frame of reference.">Position</a> - <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ae188cac475b4b6a4d932c6e507160f44" title="Holds the linear position of the rigid body in world space.">Position</a>;
            <a class="code" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248" title="Holds the relative velocity v_A - v_B between bodies at the point of contact.">Velocity</a> = <a class="code" href="class_wo_r_b_1_1_collision.html#a2706ed186be87da6ce2ba987e3925bf1" title="Gets the relative velocity for the point of contact on the given body.">GetRelativeVelocity</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1" title="Holds the first rigid body that is involved in the collision.">Body_A</a>, <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[0], h );

            <span class="keywordflow">if</span> ( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a> ) 
            {
                <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[1] = <a class="code" href="class_wo_r_b_1_1_collision.html#a1d92c8e565877791074421eb079a1bf3" title="Holds the position of the contact in world frame of reference.">Position</a> - <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ae188cac475b4b6a4d932c6e507160f44" title="Holds the linear position of the rigid body in world space.">Position</a>;
                <a class="code" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248" title="Holds the relative velocity v_A - v_B between bodies at the point of contact.">Velocity</a> -= <a class="code" href="class_wo_r_b_1_1_collision.html#a2706ed186be87da6ce2ba987e3925bf1" title="Gets the relative velocity for the point of contact on the given body.">GetRelativeVelocity</a>( <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>, <a class="code" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c" title="Holds the position of the contact point in world frame, relative to the center of each body...">RelativePosition</a>[1], h );
            }

            <span class="comment">// Calculate the desired change in velocity for the collision resolution</span>
            <span class="comment">//</span>
            <a class="code" href="class_wo_r_b_1_1_collision.html#a9cb1c0de6001e626740b17fcff44d64d" title="Holds the required change in velocity for this contact to be resolved.">BouncingVelocity</a> = <a class="code" href="class_wo_r_b_1_1_collision.html#a8e2cc27d90e6226b04bab996e5e704d3" title="Calculates the bouncing velocity required to resolve the collision.">GetBouncingVelocity</a>( h );
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ad02dd44fc1e242ccf3f8dbce0ac617c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_wo_r_b_1_1_collision.html#ad02dd44fc1e242ccf3f8dbce0ac617c1">WoRB::Collision::WithScenery</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if the collision is with scenery. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00059">59</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>References <a class="el" href="_collision_8h_source.html#l00035">Body_B</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">return</span> ! <a class="code" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397" title="Holds the second rigid body that is involved in the collision.">Body_B</a>;
        }
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a0cc23695af389c755f378ad8271ffccf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00022">22</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

</div>
</div>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a168a9e9546b92b7ca87af98ed5d41ba1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_rigid_body.html">RigidBody</a>* <a class="el" href="class_wo_r_b_1_1_collision.html#a168a9e9546b92b7ca87af98ed5d41ba1">WoRB::Collision::Body_A</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the first rigid body that is involved in the collision. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00030">30</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_collision_8h_source.html#l00156">ActivateInactiveBodies()</a>, <a class="el" href="_collision_8h_source.html#l00247">GetBouncingVelocity()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00143">GetImpulse()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00181">GetImpulse_IncludeFriction()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00102">ImpulseTransfer()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00017">WoRB::CollisionResolver::ImpulseTransfers()</a>, <a class="el" href="_position_projections_8cpp_source.html#l00088">PositionProjection()</a>, <a class="el" href="_position_projections_8cpp_source.html#l00017">WoRB::CollisionResolver::PositionProjections()</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, and <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a0e0e492e2628745251738ecf4d1397"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_rigid_body.html">RigidBody</a>* <a class="el" href="class_wo_r_b_1_1_collision.html#a1a0e0e492e2628745251738ecf4d1397">WoRB::Collision::Body_B</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the second rigid body that is involved in the collision. </p>
<p>It is null in case of the collision with a scenery. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00035">35</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_collision_8h_source.html#l00156">ActivateInactiveBodies()</a>, <a class="el" href="_collision_8h_source.html#l00247">GetBouncingVelocity()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00143">GetImpulse()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00181">GetImpulse_IncludeFriction()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00102">ImpulseTransfer()</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>, and <a class="el" href="_collision_8h_source.html#l00059">WithScenery()</a>.</p>

</div>
</div>
<a class="anchor" id="a9cb1c0de6001e626740b17fcff44d64d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_wo_r_b_1_1_collision.html#a9cb1c0de6001e626740b17fcff44d64d">WoRB::Collision::BouncingVelocity</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the required change in velocity for this contact to be resolved. </p>
<p>The basic expression is <code>-( 1 + COR ) * Velocity.x</code> </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00134">134</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_wo_r_b_8cpp_source.html#l00024">Dump()</a>, <a class="el" href="_collision_resolver_8h_source.html#l00189">WoRB::CollisionResolver::FindLargestBouncingVelocity()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00143">GetImpulse()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00181">GetImpulse_IncludeFriction()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00017">WoRB::CollisionResolver::ImpulseTransfers()</a>, and <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>.</p>

</div>
</div>
<a class="anchor" id="a20762eafac9a2f6eec3908013b194979"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_wo_r_b_1_1_collision.html#a20762eafac9a2f6eec3908013b194979">WoRB::Collision::Friction</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the friction coefficient for this collision. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00055">55</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_wo_r_b_8cpp_source.html#l00024">Dump()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00181">GetImpulse_IncludeFriction()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00102">ImpulseTransfer()</a>, and <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>.</p>

</div>
</div>
<a class="anchor" id="a0115b5e8ad2c338bf23e77b379f994a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> <a class="el" href="class_wo_r_b_1_1_collision.html#a0115b5e8ad2c338bf23e77b379f994a3">WoRB::Collision::Normal</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the direction of the contact in world frame of reference. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00043">43</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_wo_r_b_8cpp_source.html#l00024">Dump()</a>, <a class="el" href="_collision_8h_source.html#l00171">FindOrthonormalBasisAtContactPoint()</a>, <a class="el" href="_collision_8h_source.html#l00247">GetBouncingVelocity()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00143">GetImpulse()</a>, <a class="el" href="_position_projections_8cpp_source.html#l00088">PositionProjection()</a>, <a class="el" href="_position_projections_8cpp_source.html#l00017">WoRB::CollisionResolver::PositionProjections()</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, and <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a21575674b1f797e742a2f9862d29f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_wo_r_b_1_1_collision.html#a6a21575674b1f797e742a2f9862d29f0">WoRB::Collision::Penetration</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the penetration depth at the point of contact. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00047">47</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_wo_r_b_8cpp_source.html#l00024">Dump()</a>, <a class="el" href="_collision_resolver_8h_source.html#l00205">WoRB::CollisionResolver::FindLargestPenetration()</a>, <a class="el" href="_position_projections_8cpp_source.html#l00088">PositionProjection()</a>, <a class="el" href="_position_projections_8cpp_source.html#l00017">WoRB::CollisionResolver::PositionProjections()</a>, and <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>.</p>

</div>
</div>
<a class="anchor" id="a1d92c8e565877791074421eb079a1bf3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> <a class="el" href="class_wo_r_b_1_1_collision.html#a1d92c8e565877791074421eb079a1bf3">WoRB::Collision::Position</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the position of the contact in world frame of reference. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00039">39</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_wo_r_b_8cpp_source.html#l00024">Dump()</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, and <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>.</p>

</div>
</div>
<a class="anchor" id="a3544a49b614ed725fde4879f15ed1c2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> <a class="el" href="class_wo_r_b_1_1_collision.html#a3544a49b614ed725fde4879f15ed1c2c">WoRB::Collision::RelativePosition</a>[2]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the position of the contact point in world frame, relative to the center of each body. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00139">139</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_wo_r_b_8cpp_source.html#l00024">Dump()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00143">GetImpulse()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00181">GetImpulse_IncludeFriction()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00102">ImpulseTransfer()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00017">WoRB::CollisionResolver::ImpulseTransfers()</a>, <a class="el" href="_position_projections_8cpp_source.html#l00088">PositionProjection()</a>, <a class="el" href="_position_projections_8cpp_source.html#l00017">WoRB::CollisionResolver::PositionProjections()</a>, and <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>.</p>

</div>
</div>
<a class="anchor" id="aef2c3827aa2c587fbe4394d0debbea4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_wo_r_b_1_1_collision.html#aef2c3827aa2c587fbe4394d0debbea4b">WoRB::Collision::Restitution</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the position projections coefficient for this collision. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00051">51</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_wo_r_b_8cpp_source.html#l00024">Dump()</a>, <a class="el" href="_collision_8h_source.html#l00247">GetBouncingVelocity()</a>, and <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>.</p>

</div>
</div>
<a class="anchor" id="ab601d1ce458cb38bc3ad8afc8ed480f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_q_tensor.html">QTensor</a> <a class="el" href="class_wo_r_b_1_1_collision.html#ab601d1ce458cb38bc3ad8afc8ed480f1">WoRB::Collision::ToWorld</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Contains a transformation matrix from body to world frame of reference. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00125">125</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_collision_8h_source.html#l00171">FindOrthonormalBasisAtContactPoint()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00181">GetImpulse_IncludeFriction()</a>, <a class="el" href="_collision_8h_source.html#l00215">GetRelativeVelocity()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00102">ImpulseTransfer()</a>, and <a class="el" href="_impulse_method_8cpp_source.html#l00017">WoRB::CollisionResolver::ImpulseTransfers()</a>.</p>

</div>
</div>
<a class="anchor" id="a20868f2d8f5386fee4756bea3085c248"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> <a class="el" href="class_wo_r_b_1_1_collision.html#a20868f2d8f5386fee4756bea3085c248">WoRB::Collision::Velocity</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the relative velocity v_A - v_B between bodies at the point of contact. </p>

<p>Definition at line <a class="el" href="_collision_8h_source.html#l00129">129</a> of file <a class="el" href="_collision_8h_source.html">Collision.h</a>.</p>

<p>Referenced by <a class="el" href="_wo_r_b_8cpp_source.html#l00024">Dump()</a>, <a class="el" href="_collision_8h_source.html#l00247">GetBouncingVelocity()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00181">GetImpulse_IncludeFriction()</a>, <a class="el" href="_impulse_method_8cpp_source.html#l00017">WoRB::CollisionResolver::ImpulseTransfers()</a>, and <a class="el" href="_collision_8h_source.html#l00072">UpdateDerivedQuantities()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_collision_8h_source.html">Collision.h</a></li>
<li><a class="el" href="_impulse_method_8cpp_source.html">ImpulseMethod.cpp</a></li>
<li><a class="el" href="_position_projections_8cpp_source.html">PositionProjections.cpp</a></li>
<li><a class="el" href="_wo_r_b_8cpp_source.html">WoRB.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_wo_r_b.html">WoRB</a>      </li>
      <li class="navelem"><a class="el" href="class_wo_r_b_1_1_collision.html">Collision</a>      </li>

    <li class="footer">Generated on Sun Feb 24 2013 14:18:28 for World of Rigid Bodies (WoRB) by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
