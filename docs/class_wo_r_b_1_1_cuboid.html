<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>World of Rigid Bodies (WoRB): WoRB::Cuboid Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">World of Rigid Bodies (WoRB)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_wo_r_b_1_1_cuboid.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">WoRB::Cuboid Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Encapsulates a cuboid (rectangular parallelepiped).  
 <a href="class_wo_r_b_1_1_cuboid.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_geometry_8h_source.html">Geometry.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for WoRB::Cuboid:</div>
<div class="dyncontent">
<div class="center"><img src="class_wo_r_b_1_1_cuboid__inherit__graph.png" border="0" usemap="#_wo_r_b_1_1_cuboid_inherit__map" alt="Inheritance graph"/></div>
<map name="_wo_r_b_1_1_cuboid_inherit__map" id="_wo_r_b_1_1_cuboid_inherit__map">
<area shape="rect" id="node5" href="class_wo_r_b_1_1_box.html" title="Encapsulates a rigid body with geometry of a rectangular parallelepiped." alt="" coords="52,707,193,861"/><area shape="rect" id="node2" href="class_wo_r_b_1_1_geometry.html" title="Represents a geometry used to detect collisions against." alt="" coords="60,6,185,247"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for WoRB::Cuboid:</div>
<div class="dyncontent">
<div class="center"><img src="class_wo_r_b_1_1_cuboid__coll__graph.png" border="0" usemap="#_wo_r_b_1_1_cuboid_coll__map" alt="Collaboration graph"/></div>
<map name="_wo_r_b_1_1_cuboid_coll__map" id="_wo_r_b_1_1_cuboid_coll__map">
<area shape="rect" id="node2" href="class_wo_r_b_1_1_geometry.html" title="Represents a geometry used to detect collisions against." alt="" coords="143,3219,268,3443"/><area shape="rect" id="node4" href="class_wo_r_b_1_1_rigid_body.html" title="Encapsulates a rigid body." alt="" coords="133,1870,331,3151"/><area shape="rect" id="node6" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions." alt="" coords="5,331,187,1664"/><area shape="rect" id="node8" href="class_wo_r_b_1_1_q_tensor.html" title="Encapsulates a quaternionic tensor (q&#45;tensor) as a 4x4 row&#45;major matrix." alt="" coords="211,391,435,1603"/><area shape="rect" id="node10" href="struct_wo_r_b_1_1_q_tensor_1_1_components.html" title="Represents tensor components in a column&#45;major order." alt="" coords="224,5,421,264"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5a4ee3246d8c40b236607214dc07a200"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a5a4ee3246d8c40b236607214dc07a200">Cuboid</a> ()</td></tr>
<tr class="memitem:ae5397916e2956a422587b68b83b034a1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#ae5397916e2956a422587b68b83b034a1">Volume</a> () const </td></tr>
<tr class="memdesc:ae5397916e2956a422587b68b83b034a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the volume of the cuboid.  <a href="#ae5397916e2956a422587b68b83b034a1"></a><br/></td></tr>
<tr class="memitem:a21f09fa55d5adc0837e04b1759f9ea07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a21f09fa55d5adc0837e04b1759f9ea07">SetMass</a> (double mass)</td></tr>
<tr class="memdesc:a21f09fa55d5adc0837e04b1759f9ea07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets body mass and principal moment of inertia of the cuboid.  <a href="#a21f09fa55d5adc0837e04b1759f9ea07"></a><br/></td></tr>
<tr class="memitem:a12b57f28190c076be441f13994cfdfb7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a12b57f28190c076be441f13994cfdfb7">Intersects</a> (const <a class="el" href="class_wo_r_b_1_1_half_space.html">HalfSpace</a> &amp;plane) const </td></tr>
<tr class="memdesc:a12b57f28190c076be441f13994cfdfb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests for intersection of the cuboid and a half-space.  <a href="#a12b57f28190c076be441f13994cfdfb7"></a><br/></td></tr>
<tr class="memitem:ad60da1ba85b9b032566d03e0f10a22fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#ad60da1ba85b9b032566d03e0f10a22fd">Intersects</a> (const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;B) const </td></tr>
<tr class="memdesc:ad60da1ba85b9b032566d03e0f10a22fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests for intersection between this and some other cuboid.  <a href="#ad60da1ba85b9b032566d03e0f10a22fd"></a><br/></td></tr>
<tr class="memitem:a786fa87da2ce13454bde4ea45b6fc5d6"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a786fa87da2ce13454bde4ea45b6fc5d6">Check</a> (<a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;owner, const <a class="el" href="class_wo_r_b_1_1_half_space.html">HalfSpace</a> &amp;plane) const </td></tr>
<tr class="memdesc:a786fa87da2ce13454bde4ea45b6fc5d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for collision between the cuboid and a half-space.  <a href="#a786fa87da2ce13454bde4ea45b6fc5d6"></a><br/></td></tr>
<tr class="memitem:aff29b1b374a7774a76baa87aa042d5b2"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#aff29b1b374a7774a76baa87aa042d5b2">Check</a> (<a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;owner, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;point) const </td></tr>
<tr class="memdesc:aff29b1b374a7774a76baa87aa042d5b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for collision between the cuboid and a point.  <a href="#aff29b1b374a7774a76baa87aa042d5b2"></a><br/></td></tr>
<tr class="memitem:ab3554bbddf7173bf12fba099c8afb7c0"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#ab3554bbddf7173bf12fba099c8afb7c0">Check</a> (<a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;owner, const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;B) const </td></tr>
<tr class="memdesc:ab3554bbddf7173bf12fba099c8afb7c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for collision between this and some other cuboid.  <a href="#ab3554bbddf7173bf12fba099c8afb7c0"></a><br/></td></tr>
<tr class="memitem:a8407d97c001c4a4fedb056a682a08166"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a8407d97c001c4a4fedb056a682a08166">Check</a> (<a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;owner, const <a class="el" href="class_wo_r_b_1_1_sphere.html">Sphere</a> &amp;B) const </td></tr>
<tr class="memdesc:a8407d97c001c4a4fedb056a682a08166"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for collision between the cuboid and a sphere.  <a href="#a8407d97c001c4a4fedb056a682a08166"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a9ecf78f593c8a6f2e9916669ae14a9bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd">HalfExtent</a></td></tr>
<tr class="memdesc:a9ecf78f593c8a6f2e9916669ae14a9bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the half-extent of the cuboid along each of its local axes.  <a href="#a9ecf78f593c8a6f2e9916669ae14a9bd"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Private methods: Intersection detection related</h2></td></tr>
<tr class="memitem:afb124abb0439da12aba14b476b03fbb1"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#afb124abb0439da12aba14b476b03fbb1">Clamp</a> (double x, double max)</td></tr>
<tr class="memdesc:afb124abb0439da12aba14b476b03fbb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clamps the given value to some +/- max value.  <a href="#afb124abb0439da12aba14b476b03fbb1"></a><br/></td></tr>
<tr class="memitem:a598017dfa329b49be2a05cd72cfcb89c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a598017dfa329b49be2a05cd72cfcb89c">FindContactPointOnEdges</a> (const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;pt_A, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;axis_A, double size_A, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;pt_B, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;axis_B, double size_B, bool use_A)</td></tr>
<tr class="memdesc:a598017dfa329b49be2a05cd72cfcb89c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds point of contact between two points on two cuboid edges.  <a href="#a598017dfa329b49be2a05cd72cfcb89c"></a><br/></td></tr>
<tr class="memitem:a0a040b21bb7de29b4cc0b1385c0f56e7"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a0a040b21bb7de29b4cc0b1385c0f56e7">ProjectOn</a> (const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;vector) const </td></tr>
<tr class="memdesc:a0a040b21bb7de29b4cc0b1385c0f56e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the sum of cuboid's half-extent's projections on the given vector.  <a href="#a0a040b21bb7de29b4cc0b1385c0f56e7"></a><br/></td></tr>
<tr class="memitem:ae15fb1a9ed73d6233ca8a92f6544e58d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#ae15fb1a9ed73d6233ca8a92f6544e58d">GetPenetrationOnAxis</a> (const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;B, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;axis, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;displacement) const </td></tr>
<tr class="memdesc:ae15fb1a9ed73d6233ca8a92f6544e58d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if this and another cuboid overlap along the given direction.  <a href="#ae15fb1a9ed73d6233ca8a92f6544e58d"></a><br/></td></tr>
<tr class="memitem:a159a51a754bc4e406311b01f3c59548a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a">IsOverlapOnAxis</a> (const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;B, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;direction, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;displacement) const </td></tr>
<tr class="memdesc:a159a51a754bc4e406311b01f3c59548a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if this and another cuboid overlap along the given direction.  <a href="#a159a51a754bc4e406311b01f3c59548a"></a><br/></td></tr>
<tr class="memitem:a0a28929504302e986cde87ce96542483"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a0a28929504302e986cde87ce96542483">CheckOverlapOnAxis</a> (const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;B, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;direction, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;displacement, double &amp;smallestPenetration, unsigned tag_A, unsigned tag_B, unsigned &amp;indexTag_A, unsigned &amp;indexTag_B) const </td></tr>
<tr class="memdesc:a0a28929504302e986cde87ce96542483"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for overlap along the given direction.  <a href="#a0a28929504302e986cde87ce96542483"></a><br/></td></tr>
<tr class="memitem:a561985f3122f4f1ded66db0679020510"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a561985f3122f4f1ded66db0679020510">RegisterContactOnAxis_Thorough</a> (<a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;owner, const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;B, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;displacement, unsigned axis) const </td></tr>
<tr class="memdesc:a561985f3122f4f1ded66db0679020510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a contact between this and the other cuboid body along an axis.  <a href="#a561985f3122f4f1ded66db0679020510"></a><br/></td></tr>
<tr class="memitem:a0aecd0198fc5a9f0786e3bf0e586956c"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a0aecd0198fc5a9f0786e3bf0e586956c">RegisterContactOnAxis</a> (<a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;owner, const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;B, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;displacement, const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;axis, double penetration) const </td></tr>
<tr class="memdesc:a0aecd0198fc5a9f0786e3bf0e586956c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a contact between this and the other cuboid body along an axis.  <a href="#a0aecd0198fc5a9f0786e3bf0e586956c"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Encapsulates a cuboid (rectangular parallelepiped). </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00230">230</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5a4ee3246d8c40b236607214dc07a200"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_cuboid.html#a5a4ee3246d8c40b236607214dc07a200">WoRB::Cuboid::Cuboid</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00234">234</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>
<div class="fragment"><pre class="fragment">            : <a class="code" href="class_wo_r_b_1_1_geometry.html#a951683be8ec3e98cdb641ce72d754e3f" title="Protected constructor; disallows explicit instantiation of the class.">Geometry</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#ad2c30b5e8014eee92ad12f1389c3c967af9321c1935933692d035faa2b6eb8595">Geometry::_Cuboid</a> )
        {
        }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a786fa87da2ce13454bde4ea45b6fc5d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="class_wo_r_b_1_1_cuboid.html#a786fa87da2ce13454bde4ea45b6fc5d6">Cuboid::Check</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_half_space.html">HalfSpace</a> &amp;&#160;</td>
          <td class="paramname"><em>plane</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks for collision between the cuboid and a half-space. </p>

<p>Definition at line <a class="el" href="_collision_detection_8cpp_source.html#l00557">557</a> of file <a class="el" href="_collision_detection_8cpp_source.html">CollisionDetection.cpp</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00088">WoRB::Geometry::Axis()</a>, <a class="el" href="_geometry_8h_source.html#l00075">WoRB::Geometry::Body</a>, <a class="el" href="_quaternion_8h_source.html#l00290">WoRB::Quaternion::ComponentWiseProduct()</a>, <a class="el" href="_geometry_8h_source.html#l00119">WoRB::HalfSpace::Direction</a>, <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, <a class="el" href="_geometry_8h_source.html#l00241">HalfExtent</a>, <a class="el" href="_collision_resolver_8h_source.html#l00099">WoRB::CollisionResolver::HasSpaceForMoreContacts()</a>, <a class="el" href="_geometry_8h_source.html#l00272">Intersects()</a>, <a class="el" href="_geometry_8h_source.html#l00123">WoRB::HalfSpace::Offset</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, and <a class="el" href="_rigid_body_8h_source.html#l00075">WoRB::RigidBody::ToWorld</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( ! owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#a851f8a287fca3878e792372c90b93af4" title="Checks if there is a free space available for more contact data.">HasSpaceForMoreContacts</a> () ) { 
        <span class="keywordflow">return</span> 0; <span class="comment">// We do not have space left for new contacts</span>
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ! <a class="code" href="class_wo_r_b_1_1_cuboid.html#a12b57f28190c076be441f13994cfdfb7" title="Tests for intersection of the cuboid and a half-space.">Intersects</a>( plane ) ) {
        <span class="keywordflow">return</span> 0; <span class="comment">// No intersection between the cuboid and the half-space</span>
    }

    <span class="comment">// The contact point with the largest penetration</span>
    <span class="comment">// By default zero, meaning the mid-point on all edges of the cuboid.</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> contactPoint; 

    <span class="comment">// Find if there exist edges/faces of the cuboid parallel to the plane</span>

    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> axis_n( 0,
        <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0).Dot( plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a7e8de5c85ef43cae1d2d6483d0bac4f3" title="The plane normal.">Direction</a> ),
        <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1).Dot( plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a7e8de5c85ef43cae1d2d6483d0bac4f3" title="The plane normal.">Direction</a> ),
        <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2).Dot( plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a7e8de5c85ef43cae1d2d6483d0bac4f3" title="The plane normal.">Direction</a> )
    );

    <span class="keywordtype">unsigned</span> parallelCount = 0;

    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> i = 0; i &lt; 3; ++i ) <span class="comment">// for each axis in B</span>
    {
        <span class="comment">// In case of cuboid&#39;s edge that is almost parallel to the plane </span>
        <span class="comment">// we take a mid-point of the edge.</span>
        <span class="comment">// Otherwise, if parallel, we take the vertex which is the closest.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> ( fabs( axis_n[i] ) &lt; 1e-4 ) <span class="comment">// almost parallel edge &amp; plane</span>
        {
            ++parallelCount;
        }
        <span class="keywordflow">else</span> <span class="comment">// if cuboid&#39;s edge is not almost parallel to the plane</span>
        {
            <span class="comment">// Select the closest vertex</span>
            <span class="comment">//</span>
            contactPoint[i] = axis_n[i] &lt; 0 ?  <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i]
                                            : -<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i];
        }
    }

    <span class="comment">// In case if there are edges/faces parallel to the plane,</span>
    <span class="comment">// just register the found mid-contact point and return.</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ( parallelCount &gt; 0 )
    {
        <span class="comment">// Switch to world coordinates and find out penetration of the</span>
        <span class="comment">// contact point into the half-space</span>
        <span class="comment">//</span>
        contactPoint = <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ab4140317241df453398dd238eae87616" title="Holds a combined translation/rotation matrix for converting from body-fixed local coordinates into wo...">ToWorld</a>( contactPoint );
        <span class="keywordtype">double</span> penetration = plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a3a080e23a76edc3cbd6871dc1e3170e7" title="The distance of the plane from the origin.">Offset</a> - contactPoint.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a7e8de5c85ef43cae1d2d6483d0bac4f3" title="The plane normal.">Direction</a> );

        <span class="comment">// Register a new contact at the point of contact</span>
        <span class="comment">//</span>
        <span class="keywordflow">return</span> owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#ade26bbf8d0c4bfd3ede0f7486e439ff8" title="Registers a new contact.">RegisterNewContact</a>(
            <span class="comment">/* a */</span> <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
            <span class="comment">/* b */</span> 0, <span class="comment">// scenery</span>
            <span class="comment">/* X */</span> contactPoint + 0.5 * penetration * plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a7e8de5c85ef43cae1d2d6483d0bac4f3" title="The plane normal.">Direction</a>,
            <span class="comment">/* N */</span> plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a7e8de5c85ef43cae1d2d6483d0bac4f3" title="The plane normal.">Direction</a>,
            <span class="comment">/* d */</span> penetration
        );
    }

    <span class="comment">// Proceede with the thorough investigation by scanning all vertices</span>

    <span class="comment">// Find the intersection points by checking all vertices. </span>
    <span class="comment">// If the cuboid is resting on a plane or on an edge, it will be reported </span>
    <span class="comment">// as four or two contact points.</span>

    <span class="comment">// Go through each combination of +/- for each half-size</span>
    <span class="comment">//</span>
    <span class="keywordtype">unsigned</span> contactCount = 0;

    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> i = 0; i &lt; 8 &amp;&amp; owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#a851f8a287fca3878e792372c90b93af4" title="Checks if there is a free space available for more contact data.">HasSpaceForMoreContacts</a> (); ++i )
    {
        <span class="comment">// Calculate the position of each vertex</span>
        <span class="comment">//</span>
        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> vertices[8][3] = 
        {
            { 1, 1,  1 }, { -1, 1,  1 }, { 1, -1,  1 }, { -1, -1,  1 },
            { 1, 1, -1 }, { -1, 1, -1 }, { 1, -1, -1 }, { -1, -1, -1 }
        };
        <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> vertexPos( 0, vertices[i][0], vertices[i][1], vertices[i][2] );

        vertexPos = vertexPos.ComponentWiseProduct( <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a> );

        vertexPos = <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ab4140317241df453398dd238eae87616" title="Holds a combined translation/rotation matrix for converting from body-fixed local coordinates into wo...">ToWorld</a>( vertexPos );

        <span class="comment">// Calculate the penetration of the vertex into the half-space</span>
        <span class="comment">//</span>
        <span class="keywordtype">double</span> penetration = plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a3a080e23a76edc3cbd6871dc1e3170e7" title="The distance of the plane from the origin.">Offset</a> - vertexPos.Dot( plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a7e8de5c85ef43cae1d2d6483d0bac4f3" title="The plane normal.">Direction</a> );

        <span class="keywordflow">if</span> ( penetration &gt;= 0 ) <span class="comment">// In case of penetration...</span>
        {
            <span class="comment">// Register a new contact where the point of contact is half-way between </span>
            <span class="comment">// the vertex and the plane</span>
            <span class="comment">//</span>
            contactCount += owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#ade26bbf8d0c4bfd3ede0f7486e439ff8" title="Registers a new contact.">RegisterNewContact</a>(
                <span class="comment">/* a */</span> <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
                <span class="comment">/* b */</span> 0, <span class="comment">// scenery</span>
                <span class="comment">/* X */</span> vertexPos + 0.5 * penetration * plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a7e8de5c85ef43cae1d2d6483d0bac4f3" title="The plane normal.">Direction</a>,
                <span class="comment">/* N */</span> plane.<a class="code" href="class_wo_r_b_1_1_half_space.html#a7e8de5c85ef43cae1d2d6483d0bac4f3" title="The plane normal.">Direction</a>,
                <span class="comment">/* d */</span> penetration
            );
        }
    }

    <span class="keywordflow">return</span> contactCount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aff29b1b374a7774a76baa87aa042d5b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="class_wo_r_b_1_1_cuboid.html#a786fa87da2ce13454bde4ea45b6fc5d6">Cuboid::Check</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks for collision between the cuboid and a point. </p>

<p>Definition at line <a class="el" href="_collision_detection_8cpp_source.html#l00475">475</a> of file <a class="el" href="_collision_detection_8cpp_source.html">CollisionDetection.cpp</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00088">WoRB::Geometry::Axis()</a>, <a class="el" href="_geometry_8h_source.html#l00075">WoRB::Geometry::Body</a>, <a class="el" href="_geometry_8h_source.html#l00241">HalfExtent</a>, <a class="el" href="_constants_8h_source.html#l00058">WoRB::Const::Max</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, <a class="el" href="_rigid_body_8h_source.html#l00075">WoRB::RigidBody::ToWorld</a>, and <a class="el" href="_q_tensor_8h_source.html#l00531">WoRB::QTensor::TransformInverse()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Transform the point into cuboid coordinates i.e. body-fixed frame</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> pointInBodySpace = <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ab4140317241df453398dd238eae87616" title="Holds a combined translation/rotation matrix for converting from body-fixed local coordinates into wo...">ToWorld</a>.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a447b71f89e6ab80bd4522643d7e36183" title="Transform the given quaternion by the inverse of this matrix.">TransformInverse</a>( point );

    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> normal;
    <span class="keywordtype">double</span> min_depth = <a class="code" href="class_wo_r_b_1_1_const.html#a84f8d422ade00343fe32e4bb66cfdca8" title="Represents the maximum finite value for a double floating-point number.">Const::Max</a>;

    <span class="comment">// Check each axis, looking for the axis on which the penetration is least deep.</span>
    <span class="comment">//</span>
    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> i = 0; i &lt; 3; ++i )
    {
        <span class="keywordtype">double</span> depth = <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i] - fabs( pointInBodySpace[i] );
        <span class="keywordflow">if</span> ( depth &lt; 0 ) {
            <span class="keywordflow">return</span> 0;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( depth &lt; min_depth )
        {
            min_depth = depth;
            normal = pointInBodySpace[i] &lt; 0 ? -<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(i) : Axis(i);
        }
    }

    <span class="keywordflow">return</span> owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#ade26bbf8d0c4bfd3ede0f7486e439ff8" title="Registers a new contact.">RegisterNewContact</a>(
        <span class="comment">/* a */</span> <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
        <span class="comment">/* b */</span> 0, <span class="comment">// == scenery</span>
        <span class="comment">/* X */</span> point,
        <span class="comment">/* N */</span> normal,
        <span class="comment">/* d */</span> min_depth
    );
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab3554bbddf7173bf12fba099c8afb7c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="class_wo_r_b_1_1_cuboid.html#a786fa87da2ce13454bde4ea45b6fc5d6">Cuboid::Check</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks for collision between this and some other cuboid. </p>

<p>Definition at line <a class="el" href="_collision_detection_8cpp_source.html#l00351">351</a> of file <a class="el" href="_collision_detection_8cpp_source.html">CollisionDetection.cpp</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00088">WoRB::Geometry::Axis()</a>, <a class="el" href="_geometry_8h_source.html#l00075">WoRB::Geometry::Body</a>, <a class="el" href="_quaternion_8h_source.html#l00297">WoRB::Quaternion::Cross()</a>, <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, <a class="el" href="_collision_detection_8cpp_source.html#l00180">FindContactPointOnEdges()</a>, <a class="el" href="_geometry_8h_source.html#l00241">HalfExtent</a>, <a class="el" href="_constants_8h_source.html#l00058">WoRB::Const::Max</a>, <a class="el" href="_geometry_8h_source.html#l00079">WoRB::Geometry::Position()</a>, <a class="el" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>, <a class="el" href="_collision_detection_8cpp_source.html#l00283">RegisterContactOnAxis()</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, <a class="el" href="_rigid_body_8h_source.html#l00075">WoRB::RigidBody::ToWorld</a>, and <a class="el" href="_quaternion_8h_source.html#l00215">WoRB::Quaternion::Unit()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Find the displacement between the two centra</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> displacement = B.<a class="code" href="class_wo_r_b_1_1_geometry.html#a059748655df2238d6e50e1f4a58297e2" title="Gets the position vector of the geometry.">Position</a>() - <a class="code" href="class_wo_r_b_1_1_geometry.html#a059748655df2238d6e50e1f4a58297e2" title="Gets the position vector of the geometry.">Position</a>();

    <span class="comment">// Assume that there is no contact</span>
    <span class="comment">//</span>
    <span class="keywordtype">double</span> penetration = <a class="code" href="class_wo_r_b_1_1_const.html#a84f8d422ade00343fe32e4bb66cfdca8" title="Represents the maximum finite value for a double floating-point number.">Const::Max</a>;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> axisIndex_A = 0xFF;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> axisIndex_B = 0xFF;

<span class="preprocessor">    #define Quit_If_No_Overlaps( axis, indexA, indexB ) \</span>
<span class="preprocessor">    if ( ! CheckOverlapOnAxis( B, (axis), displacement, penetration, \</span>
<span class="preprocessor">            (indexA), (indexB), axisIndex_A, axisIndex_B ) ) { \</span>
<span class="preprocessor">        return 0; \</span>
<span class="preprocessor">    }</span>
<span class="preprocessor"></span>
    <span class="comment">// Check each body axes, keeping track of the axis with the smallest penetration</span>
    <span class="comment">//</span>
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0)  ,    0, 0xFF );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1)  ,    1, 0xFF );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2)  ,    2, 0xFF );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0), 0xFF,    0 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1), 0xFF,    1 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2), 0xFF,    2 );

    <span class="comment">// Remember the single axis with the smallest penetration</span>
    <span class="comment">//</span>
    <span class="keywordtype">bool</span> use_A = axisIndex_B != 0xFF;

    <span class="comment">// Continue with the axes cross products</span>
    <span class="comment">//</span>
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0).Cross( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0) ), 0, 0 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0).Cross( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1) ), 0, 1 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0).Cross( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2) ), 0, 2 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1).Cross( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0) ), 1, 0 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1).Cross( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1) ), 1, 1 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1).Cross( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2) ), 1, 2 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2).Cross( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0) ), 2, 0 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2).Cross( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1) ), 2, 1 );
    <a class="code" href="_collision_detection_8cpp.html#aa814ea1043a0e575355e36a880e9089c">Quit_If_No_Overlaps</a>( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2).Cross( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2) ), 2, 2 );
                                                           
<span class="preprocessor">    #undef Quit_If_No_Overlaps</span>
<span class="preprocessor"></span>
    <span class="comment">// At this point we have detected a collision!</span>

    <span class="keywordflow">if</span> ( axisIndex_B == 0xFF ) <span class="comment">// single axis A</span>
    {
        <span class="comment">// The collision between cuboid B&#39;s vertex and this cuboid&#39;s face</span>
        <span class="comment">//</span>
        <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_wo_r_b_1_1_cuboid.html#a0aecd0198fc5a9f0786e3bf0e586956c" title="Registers a contact between this and the other cuboid body along an axis.">RegisterContactOnAxis</a>( owner, B, 
            displacement, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>( axisIndex_A ), penetration );
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( axisIndex_A == 0xFF ) <span class="comment">// single axis B</span>
    {
        <span class="comment">// The collision between this cuboid&#39;s vertex and cuboid B&#39;s face</span>
        <span class="comment">//</span>
        <span class="keywordflow">return</span> B.<a class="code" href="class_wo_r_b_1_1_cuboid.html#a0aecd0198fc5a9f0786e3bf0e586956c" title="Registers a contact between this and the other cuboid body along an axis.">RegisterContactOnAxis</a>( owner, *<span class="keyword">this</span>, 
            -displacement, B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>( axisIndex_B ), penetration );
    }

    <span class="comment">// It is an edge-edge collision; get the involved axes from indices</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> axis_A = <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>( axisIndex_A );
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> axis_B = B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>( axisIndex_B );

    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> normal = axis_A.<a class="code" href="class_wo_r_b_1_1_quaternion.html#af5296e5e0db5729772045e5b26d907be" title="Returns a vector product of the vector parts of this and another quaternion.">Cross</a>( axis_B ).<a class="code" href="class_wo_r_b_1_1_quaternion.html#a166ab5b8231014960a6d70c6c2a623c7" title="Returns the normalized version (versor) of a quaternion.">Unit</a> ();

    <span class="comment">// Make the normal always point from A to B</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ( normal.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( displacement ) &gt; 0 ) {
        normal = -normal;
    }

    <span class="comment">// Find the closest point on the involved edges to the other axes.</span>
    <span class="comment">// By default the closest point is mid-point on the edge.</span>
    <span class="comment">// @note  Compare to RegisterContactOnAxis algorithm.</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> ptOn_Edge_A; <span class="comment">// = zero (mid-point on all edges by default)</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> ptOn_Edge_B; <span class="comment">// = zero (mid-point on all edges by default)</span>

    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> i = 0; i &lt; 3; ++i ) <span class="comment">// foreach axis in A and B</span>
    {
        <span class="keywordflow">if</span> ( i != axisIndex_A )
        {
            <span class="keywordtype">double</span> axis_An = <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(i).<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( normal );

            <span class="keywordflow">if</span> ( fabs( axis_An ) &gt; 1e-4 ) {
                ptOn_Edge_A[i] = axis_An &gt; 0 ? -<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i] 
                                             :  <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i];
            }
        }
        <span class="keywordflow">if</span> ( i != axisIndex_B )
        {
            <span class="keywordtype">double</span> axis_Bn = B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(i).<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( normal );

            <span class="keywordflow">if</span> ( fabs( axis_Bn ) &gt; 1e-4 ) {
                ptOn_Edge_B[i] = axis_Bn &gt; 0 ?  B.<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i] 
                                             : -B.<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i];
            }
        }
    }

    <span class="comment">// At this moment we have a point and a direction for the colliding edges.</span>
    <span class="comment">// Now, find out the contact point i.e. the closest approach of B&#39;s line-segments.</span>
    <span class="comment">// (Note that, from here, we continue in world coordinates.)</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> contactPoint_world = <a class="code" href="class_wo_r_b_1_1_cuboid.html#a598017dfa329b49be2a05cd72cfcb89c" title="Finds point of contact between two points on two cuboid edges.">FindContactPointOnEdges</a>(
        <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ab4140317241df453398dd238eae87616" title="Holds a combined translation/rotation matrix for converting from body-fixed local coordinates into wo...">ToWorld</a>( ptOn_Edge_A ),   axis_A, <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[ axisIndex_A ],
        B.<a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ab4140317241df453398dd238eae87616" title="Holds a combined translation/rotation matrix for converting from body-fixed local coordinates into wo...">ToWorld</a>( ptOn_Edge_B ), axis_B, B.<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[ axisIndex_B ], use_A
    );

    <span class="keywordflow">return</span> owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#ade26bbf8d0c4bfd3ede0f7486e439ff8" title="Registers a new contact.">RegisterNewContact</a>(
        <span class="comment">/* a */</span> <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
        <span class="comment">/* b */</span> B.<a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
        <span class="comment">/* X */</span> contactPoint_world,
        <span class="comment">/* N */</span> normal,
        <span class="comment">/* d */</span> penetration
    );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8407d97c001c4a4fedb056a682a08166"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="class_wo_r_b_1_1_cuboid.html#a786fa87da2ce13454bde4ea45b6fc5d6">Cuboid::Check</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_sphere.html">Sphere</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks for collision between the cuboid and a sphere. </p>

<p>Definition at line <a class="el" href="_collision_detection_8cpp_source.html#l00510">510</a> of file <a class="el" href="_collision_detection_8cpp_source.html">CollisionDetection.cpp</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00075">WoRB::Geometry::Body</a>, <a class="el" href="_geometry_8h_source.html#l00338">Clamp()</a>, <a class="el" href="_geometry_8h_source.html#l00241">HalfExtent</a>, <a class="el" href="_geometry_8h_source.html#l00079">WoRB::Geometry::Position()</a>, <a class="el" href="_geometry_8h_source.html#l00165">WoRB::Sphere::Radius</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, <a class="el" href="_rigid_body_8h_source.html#l00075">WoRB::RigidBody::ToWorld</a>, <a class="el" href="_q_tensor_8h_source.html#l00531">WoRB::QTensor::TransformInverse()</a>, <a class="el" href="_quaternion_8h_source.html#l00215">WoRB::Quaternion::Unit()</a>, <a class="el" href="_quaternion_8h_source.html#l00040">WoRB::Quaternion::x</a>, <a class="el" href="_quaternion_8h_source.html#l00041">WoRB::Quaternion::y</a>, and <a class="el" href="_quaternion_8h_source.html#l00042">WoRB::Quaternion::z</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Transform the center of the sphere into cuboid coordinates</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> center = B.<a class="code" href="class_wo_r_b_1_1_geometry.html#a059748655df2238d6e50e1f4a58297e2" title="Gets the position vector of the geometry.">Position</a> ();
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> relCenter = <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ab4140317241df453398dd238eae87616" title="Holds a combined translation/rotation matrix for converting from body-fixed local coordinates into wo...">ToWorld</a>.<a class="code" href="class_wo_r_b_1_1_q_tensor.html#a447b71f89e6ab80bd4522643d7e36183" title="Transform the given quaternion by the inverse of this matrix.">TransformInverse</a>( center );

    <span class="comment">// Early out check to see if we can exclude the contact</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ( fabs( relCenter.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> ) - B.<a class="code" href="class_wo_r_b_1_1_sphere.html#af4d0454c53ef311aa99bd81f356c8710" title="Holds the radius of the sphere.">Radius</a> &gt; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> ||
         fabs( relCenter.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> ) - B.<a class="code" href="class_wo_r_b_1_1_sphere.html#af4d0454c53ef311aa99bd81f356c8710" title="Holds the radius of the sphere.">Radius</a> &gt; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> ||
         fabs( relCenter.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> ) - B.<a class="code" href="class_wo_r_b_1_1_sphere.html#af4d0454c53ef311aa99bd81f356c8710" title="Holds the radius of the sphere.">Radius</a> &gt; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> )
    {
        <span class="keywordflow">return</span> 0;
    }

    <span class="comment">// Clamp each coordinate to the cuboid</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> closestPoint( 0,
        <a class="code" href="class_wo_r_b_1_1_cuboid.html#afb124abb0439da12aba14b476b03fbb1" title="Clamps the given value to some +/- max value.">Clamp</a>( relCenter.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a>, <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> ),
        <a class="code" href="class_wo_r_b_1_1_cuboid.html#afb124abb0439da12aba14b476b03fbb1" title="Clamps the given value to some +/- max value.">Clamp</a>( relCenter.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a>, <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> ),
        <a class="code" href="class_wo_r_b_1_1_cuboid.html#afb124abb0439da12aba14b476b03fbb1" title="Clamps the given value to some +/- max value.">Clamp</a>( relCenter.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a>, <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> )
    );

    <span class="comment">// Check we&#39;re in contact</span>
    <span class="comment">//</span>
    <span class="keywordtype">double</span> distance = ( closestPoint - relCenter ).ImSquaredNorm();
    <span class="keywordflow">if</span> ( distance &gt; B.<a class="code" href="class_wo_r_b_1_1_sphere.html#af4d0454c53ef311aa99bd81f356c8710" title="Holds the radius of the sphere.">Radius</a> * B.<a class="code" href="class_wo_r_b_1_1_sphere.html#af4d0454c53ef311aa99bd81f356c8710" title="Holds the radius of the sphere.">Radius</a> ) {
        <span class="keywordflow">return</span> 0;
    }
    distance = sqrt( distance );

    <span class="comment">// New contact at the closest point in world coordinates</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> closestPointWorld = <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ab4140317241df453398dd238eae87616" title="Holds a combined translation/rotation matrix for converting from body-fixed local coordinates into wo...">ToWorld</a>( closestPoint );

    <span class="keywordflow">return</span> owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#ade26bbf8d0c4bfd3ede0f7486e439ff8" title="Registers a new contact.">RegisterNewContact</a>(
        <span class="comment">/* a */</span> <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
        <span class="comment">/* b */</span> B.<a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
        <span class="comment">/* X */</span> closestPointWorld,
        <span class="comment">/* N */</span> ( closestPointWorld - center ).<a class="code" href="class_wo_r_b_1_1_quaternion.html#a166ab5b8231014960a6d70c6c2a623c7" title="Returns the normalized version (versor) of a quaternion.">Unit</a> (),
        <span class="comment">/* d */</span> B.<a class="code" href="class_wo_r_b_1_1_sphere.html#af4d0454c53ef311aa99bd81f356c8710" title="Holds the radius of the sphere.">Radius</a> - distance
    );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0a28929504302e986cde87ce96542483"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_wo_r_b_1_1_cuboid.html#a0a28929504302e986cde87ce96542483">WoRB::Cuboid::CheckOverlapOnAxis</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>displacement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>smallestPenetration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>tag_A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>tag_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>indexTag_A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned &amp;&#160;</td>
          <td class="paramname"><em>indexTag_B</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks for overlap along the given direction. </p>
<p>Keeps track of the smallest penetration. </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00386">386</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00354">GetPenetrationOnAxis()</a>, and <a class="el" href="_quaternion_8h_source.html#l00194">WoRB::Quaternion::ImSquaredNorm()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="comment">// Skip almost parallel axes.</span>
            <span class="keywordflow">if</span> ( direction.ImSquaredNorm() &lt; 1e-4 ) {
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }

            <span class="comment">// Get penetration depth on axis.</span>
            <span class="keywordtype">double</span> penetration = <a class="code" href="class_wo_r_b_1_1_cuboid.html#ae15fb1a9ed73d6233ca8a92f6544e58d" title="Checks if this and another cuboid overlap along the given direction.">GetPenetrationOnAxis</a>( B, direction, displacement );

            <span class="keywordflow">if</span> ( penetration &lt; 0 ) { <span class="comment">// no penetration</span>
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( penetration &lt; smallestPenetration <span class="comment">/*- 1e-6 */</span> ) {
                smallestPenetration = penetration;
                indexTag_A = tag_A;
                indexTag_B = tag_B;
            }
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="afb124abb0439da12aba14b476b03fbb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static double <a class="el" href="class_wo_r_b_1_1_cuboid.html#afb124abb0439da12aba14b476b03fbb1">WoRB::Cuboid::Clamp</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Clamps the given value to some +/- max value. </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00338">338</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>Referenced by <a class="el" href="_collision_detection_8cpp_source.html#l00510">Check()</a>.</p>
<div class="fragment"><pre class="fragment">                                                           {
            <span class="keywordflow">return</span> x &gt; max ? max : x &lt; -max ? -max : x;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a598017dfa329b49be2a05cd72cfcb89c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> <a class="el" href="class_wo_r_b_1_1_cuboid.html#a598017dfa329b49be2a05cd72cfcb89c">Cuboid::FindContactPointOnEdges</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>pt_A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>axis_A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>size_A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>pt_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>axis_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>size_B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_A</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds point of contact between two points on two cuboid edges. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pt_A</td><td>Point on the edge of the cuboid A </td></tr>
    <tr><td class="paramname">axis_A</td><td>Axis of the cuboid A </td></tr>
    <tr><td class="paramname">size_A</td><td>Half-extent of A's axis </td></tr>
    <tr><td class="paramname">pt_B</td><td>Point on the edge of the cuboid B </td></tr>
    <tr><td class="paramname">axis_B</td><td>Axis of the cuboid B </td></tr>
    <tr><td class="paramname">size_B</td><td>Half-extent of B's axis </td></tr>
    <tr><td class="paramname">use_A</td><td>Which cuboid to use, if point is on the edge </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_collision_detection_8cpp_source.html#l00180">180</a> of file <a class="el" href="_collision_detection_8cpp_source.html">CollisionDetection.cpp</a>.</p>

<p>References <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, and <a class="el" href="_quaternion_8h_source.html#l00194">WoRB::Quaternion::ImSquaredNorm()</a>.</p>

<p>Referenced by <a class="el" href="_collision_detection_8cpp_source.html#l00351">Check()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// If use_A is true, and the contact point is outside the edge (in the case of </span>
    <span class="comment">// an edge-face contact) then we use &#39;this&#39; cuboid&#39;s midpoint, otherwise we use B&#39;s.</span>

    <span class="keywordtype">double</span> sqNorm_dA = axis_A.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a302f011210b40732f7023d10a356659b" title="Gets the squared magnitude of the vector part of this quaternion.">ImSquaredNorm</a>(); <span class="comment">// d_A = Axis A</span>
    <span class="keywordtype">double</span> sqNorm_dB = axis_B.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a302f011210b40732f7023d10a356659b" title="Gets the squared magnitude of the vector part of this quaternion.">ImSquaredNorm</a>(); <span class="comment">// d_B = Axis B</span>
    <span class="keywordtype">double</span> axis_AB = axis_B.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( axis_A ); <span class="comment">// Scalar product axis_A and axis_B</span>

    <span class="comment">// Displacement between point on edge of this cuboid (A) and point on edge B</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> p_AB = ptOn_A - ptOn_B;
    <span class="keywordtype">double</span> dpSta_A = p_AB.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( axis_A );
    <span class="keywordtype">double</span> dpSta_B = p_AB.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( axis_B );

    <span class="keywordtype">double</span> denominator = sqNorm_dA * sqNorm_dB - axis_AB * axis_AB;

    <span class="comment">// In case of parallel lines</span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ( fabs( denominator ) &lt; 1e-4 ) {
        <span class="keywordflow">return</span> use_A ? ptOn_A : ptOn_B;
    }

    <span class="keywordtype">double</span> mu_A = ( axis_AB   * dpSta_B - sqNorm_dB * dpSta_A ) / denominator;
    <span class="keywordtype">double</span> mu_B = ( sqNorm_dA * dpSta_B - axis_AB   * dpSta_A ) / denominator;

    <span class="comment">// If either of the edges has the nearest point out of bounds, </span>
    <span class="comment">// then the edges aren&#39;t crossed, we have an edge-face contact. </span>
    <span class="comment">//</span>
    <span class="keywordflow">if</span> ( mu_A &gt; edge_A || mu_A &lt; -edge_A || mu_B &gt; edge_B || mu_B &lt; -edge_B )
    {
        <span class="comment">// Our point is on the edge of body which we know from the use_A parameter.</span>
        <span class="keywordflow">return</span> use_A ? ptOn_A : ptOn_B;
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">return</span> ( ptOn_A + axis_A * mu_A ) * 0.5
             + ( ptOn_B + axis_B * mu_B ) * 0.5;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae15fb1a9ed73d6233ca8a92f6544e58d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_wo_r_b_1_1_cuboid.html#ae15fb1a9ed73d6233ca8a92f6544e58d">WoRB::Cuboid::GetPenetrationOnAxis</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>axis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>displacement</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if this and another cuboid overlap along the given direction. </p>
<dl class="section return"><dt>Returns:</dt><dd>The ammount of penetration, where positive value indicates overlap. </dd></dl>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00354">354</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>References <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, <a class="el" href="_geometry_8h_source.html#l00344">ProjectOn()</a>, and <a class="el" href="_quaternion_8h_source.html#l00215">WoRB::Quaternion::Unit()</a>.</p>

<p>Referenced by <a class="el" href="_geometry_8h_source.html#l00386">CheckOverlapOnAxis()</a>, and <a class="el" href="_geometry_8h_source.html#l00371">IsOverlapOnAxis()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            Quaternion direction = axis.Unit ();

            <span class="comment">// Project the half-extents and displacement onto axis</span>
            <span class="keywordtype">double</span> proj_A = <a class="code" href="class_wo_r_b_1_1_cuboid.html#a0a040b21bb7de29b4cc0b1385c0f56e7" title="Gets the sum of cuboid&#39;s half-extent&#39;s projections on the given vector.">ProjectOn</a>( direction );
            <span class="keywordtype">double</span> proj_B = B.ProjectOn( direction );
            <span class="keywordtype">double</span> distance = fabs( displacement.Dot( direction ) );

            <span class="comment">// Return the overlap </span>
            <span class="keywordflow">return</span> proj_A + proj_B - distance;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a12b57f28190c076be441f13994cfdfb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_wo_r_b_1_1_cuboid.html#a12b57f28190c076be441f13994cfdfb7">WoRB::Cuboid::Intersects</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_half_space.html">HalfSpace</a> &amp;&#160;</td>
          <td class="paramname"><em>plane</em></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tests for intersection of the cuboid and a half-space. </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00272">272</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00119">WoRB::HalfSpace::Direction</a>, <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, <a class="el" href="_geometry_8h_source.html#l00123">WoRB::HalfSpace::Offset</a>, <a class="el" href="_geometry_8h_source.html#l00079">WoRB::Geometry::Position()</a>, and <a class="el" href="_geometry_8h_source.html#l00344">ProjectOn()</a>.</p>

<p>Referenced by <a class="el" href="_collision_detection_8cpp_source.html#l00557">Check()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="comment">// Calculate the projected radius of the cuboid onto the plane direction</span>
            <span class="keywordtype">double</span> projectedRadius = <a class="code" href="class_wo_r_b_1_1_cuboid.html#a0a040b21bb7de29b4cc0b1385c0f56e7" title="Gets the sum of cuboid&#39;s half-extent&#39;s projections on the given vector.">ProjectOn</a>( plane.Direction );

            <span class="comment">// Calculate how far the cuboid is from the origin</span>
            <span class="keywordtype">double</span> distance = plane.Direction.Dot( <a class="code" href="class_wo_r_b_1_1_geometry.html#a059748655df2238d6e50e1f4a58297e2" title="Gets the position vector of the geometry.">Position</a>() ) - projectedRadius;

            <span class="comment">// Check for the intersection</span>
            <span class="keywordflow">return</span> distance &lt;= plane.Offset;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ad60da1ba85b9b032566d03e0f10a22fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_wo_r_b_1_1_cuboid.html#a12b57f28190c076be441f13994cfdfb7">WoRB::Cuboid::Intersects</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tests for intersection between this and some other cuboid. </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00286">286</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00088">WoRB::Geometry::Axis()</a>, <a class="el" href="_quaternion_8h_source.html#l00297">WoRB::Quaternion::Cross()</a>, <a class="el" href="_geometry_8h_source.html#l00371">IsOverlapOnAxis()</a>, and <a class="el" href="_geometry_8h_source.html#l00079">WoRB::Geometry::Position()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="comment">// Find the displacement between the centra of two cuboids</span>
            <span class="comment">//</span>
            Quaternion displacement = B.Position() - <a class="code" href="class_wo_r_b_1_1_geometry.html#a059748655df2238d6e50e1f4a58297e2" title="Gets the position vector of the geometry.">Position</a>();

            <span class="comment">// Now, first, check axes of A, then axes of B, and finally their cross products</span>
            <span class="comment">//</span>
            <span class="keywordflow">return</span> <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0),                    displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1),                    displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2),                    displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B,                B.Axis(0),   displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B,                B.Axis(1),   displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B,                B.Axis(2),   displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0).<a class="code" href="class_wo_r_b_1_1_quaternion.html#af5296e5e0db5729772045e5b26d907be" title="Returns a vector product of the vector parts of this and another quaternion.">Cross</a>( B.Axis(0) ), displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0).Cross( B.Axis(1) ), displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0).Cross( B.Axis(2) ), displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1).Cross( B.Axis(0) ), displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1).Cross( B.Axis(1) ), displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1).Cross( B.Axis(2) ), displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2).Cross( B.Axis(0) ), displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2).Cross( B.Axis(1) ), displacement )
                &amp;&amp; <a class="code" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a" title="Checks if this and another cuboid overlap along the given direction.">IsOverlapOnAxis</a>( B, <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2).Cross( B.Axis(2) ), displacement );
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a159a51a754bc4e406311b01f3c59548a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_wo_r_b_1_1_cuboid.html#a159a51a754bc4e406311b01f3c59548a">WoRB::Cuboid::IsOverlapOnAxis</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>displacement</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if this and another cuboid overlap along the given direction. </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00371">371</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00354">GetPenetrationOnAxis()</a>, and <a class="el" href="_quaternion_8h_source.html#l00194">WoRB::Quaternion::ImSquaredNorm()</a>.</p>

<p>Referenced by <a class="el" href="_geometry_8h_source.html#l00286">Intersects()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="comment">// Skip almost parallel axes.</span>
            <span class="keywordflow">if</span> ( direction.ImSquaredNorm() &lt; 1e-4 ) {
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }

            <span class="keywordflow">return</span> <a class="code" href="class_wo_r_b_1_1_cuboid.html#ae15fb1a9ed73d6233ca8a92f6544e58d" title="Checks if this and another cuboid overlap along the given direction.">GetPenetrationOnAxis</a>( B, direction, displacement ) &gt; 0;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a0a040b21bb7de29b4cc0b1385c0f56e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_wo_r_b_1_1_cuboid.html#a0a040b21bb7de29b4cc0b1385c0f56e7">WoRB::Cuboid::ProjectOn</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>vector</em></td><td>)</td>
          <td> const<code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the sum of cuboid's half-extent's projections on the given vector. </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00344">344</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00088">WoRB::Geometry::Axis()</a>, <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, <a class="el" href="_geometry_8h_source.html#l00241">HalfExtent</a>, <a class="el" href="_quaternion_8h_source.html#l00040">WoRB::Quaternion::x</a>, <a class="el" href="_quaternion_8h_source.html#l00041">WoRB::Quaternion::y</a>, and <a class="el" href="_quaternion_8h_source.html#l00042">WoRB::Quaternion::z</a>.</p>

<p>Referenced by <a class="el" href="_geometry_8h_source.html#l00354">GetPenetrationOnAxis()</a>, and <a class="el" href="_geometry_8h_source.html#l00272">Intersects()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">return</span> <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> * fabs( vector.Dot( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0) ) )
                 + <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> * fabs( vector.Dot( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1) ) )
                 + <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a> * fabs( vector.Dot( <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2) ) );
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a0aecd0198fc5a9f0786e3bf0e586956c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="class_wo_r_b_1_1_cuboid.html#a0aecd0198fc5a9f0786e3bf0e586956c">Cuboid::RegisterContactOnAxis</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>displacement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>axis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>penetration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Registers a contact between this and the other cuboid body along an axis. </p>
<p>Faster variant that does not check every vertex but the closest one. </p>
<dl class="section return"><dt>Returns:</dt><dd>1 if ok, 0 if failed to allocate space for the contact. </dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">owner</td><td>The collision registry </td></tr>
    <tr><td class="paramname">B</td><td>The second cuboid </td></tr>
    <tr><td class="paramname">displacement</td><td>The displacement between B and A centra </td></tr>
    <tr><td class="paramname">axis</td><td>The axis of this couboid (cuboid A) </td></tr>
    <tr><td class="paramname">penetration</td><td>The penetration depth </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_collision_detection_8cpp_source.html#l00283">283</a> of file <a class="el" href="_collision_detection_8cpp_source.html">CollisionDetection.cpp</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00088">WoRB::Geometry::Axis()</a>, <a class="el" href="_geometry_8h_source.html#l00075">WoRB::Geometry::Body</a>, <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, <a class="el" href="_geometry_8h_source.html#l00241">HalfExtent</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, and <a class="el" href="_rigid_body_8h_source.html#l00075">WoRB::RigidBody::ToWorld</a>.</p>

<p>Referenced by <a class="el" href="_collision_detection_8cpp_source.html#l00351">Check()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Find out which of the B faces is on the specified axis.</span>
    <span class="comment">//</span>
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> normal = axis;
    <span class="keywordflow">if</span> ( normal.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( displacement ) &gt; 0 ) {
        normal = -normal;
    }

    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> axis_Bn( 0,
        B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(0).<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( normal ),
        B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(1).<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( normal ),
        B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(2).<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( normal )
    );

    <span class="comment">// Find out which vertex of cuboid B we are colliding with.</span>

    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> contactPointOn_B; <span class="comment">// = zero</span>

    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> i = 0; i &lt; 3; ++i ) <span class="comment">// for each axis in B</span>
    {
        <span class="comment">// In case of B&#39;s edge that is almost normal to the contact normal </span>
        <span class="comment">// we take a mid-point of A&#39;s &amp; B&#39;s edges intersection projected on B.Axis(i).</span>
        <span class="comment">// Otherwise, if not normal, we take the vertex which is the closest.</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> ( fabs( axis_Bn[i] ) &lt; 1e-4 )
        {
            <span class="comment">// Project the A&#39;s half-extents and displacement onto B&#39;s axis</span>
            <span class="comment">// deltaCenter +/- halfExtent_A describes A&#39;s vertices in B&#39;s frame of ref.</span>
            <span class="comment">//</span>
            <span class="keywordtype">double</span> distance_BA  = -displacement.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(i) );
            <span class="keywordtype">double</span> halfExtent_A = <a class="code" href="class_wo_r_b_1_1_cuboid.html#a0a040b21bb7de29b4cc0b1385c0f56e7" title="Gets the sum of cuboid&#39;s half-extent&#39;s projections on the given vector.">ProjectOn</a>( B.<a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>(i) );
            <span class="keywordtype">double</span> halfExtent_B = B.<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i];

            <span class="comment">// Get mid-point of A&#39;s &amp; B&#39;s projections&#39; intersection on B&#39;s axis</span>
            <span class="comment">//</span>
            <span class="keywordtype">double</span> vxL = std::max( distance_BA - halfExtent_A, -halfExtent_B );
            <span class="keywordtype">double</span> vxR = std::min( distance_BA + halfExtent_A,  halfExtent_B );
            <span class="keywordtype">double</span> vxM = 0.5 * ( vxL + vxR );
            contactPointOn_B[i] = fabs( vxM ) &lt; 1e-4 ? 0 : vxM;
        }
        <span class="keywordflow">else</span> <span class="comment">// if B&#39;s edge is not almost normal to the contact normal </span>
        {
            <span class="comment">// Select the closest vertex</span>
            <span class="comment">//</span>
            contactPointOn_B[i] = axis_Bn[i] &gt; 0 ?  B.<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i]
                                                 : -B.<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[i];
        }
    }

    <span class="comment">// No parallel axes with faces found; single collision point</span>
    <span class="comment">//</span>
    <span class="keywordflow">return</span> owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#ade26bbf8d0c4bfd3ede0f7486e439ff8" title="Registers a new contact.">RegisterNewContact</a>(
        <span class="comment">/* a */</span> <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
        <span class="comment">/* b */</span> B.<a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
        <span class="comment">/* X */</span> B.<a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ab4140317241df453398dd238eae87616" title="Holds a combined translation/rotation matrix for converting from body-fixed local coordinates into wo...">ToWorld</a>( contactPointOn_B ),
        <span class="comment">/* N */</span> normal,
        <span class="comment">/* d */</span> penetration
    );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a561985f3122f4f1ded66db0679020510"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="class_wo_r_b_1_1_cuboid.html#a561985f3122f4f1ded66db0679020510">Cuboid::RegisterContactOnAxis_Thorough</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_wo_r_b_1_1_collision_resolver.html">CollisionResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a> &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>displacement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>axis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Registers a contact between this and the other cuboid body along an axis. </p>
<dl class="section return"><dt>Returns:</dt><dd>1 if ok, 0 if failed to allocate space for the contact. </dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">owner</td><td>The collision registry </td></tr>
    <tr><td class="paramname">B</td><td>The second cuboid </td></tr>
    <tr><td class="paramname">displacement</td><td>The displacement between B and A centra </td></tr>
    <tr><td class="paramname">axis</td><td>A's axis </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_collision_detection_8cpp_source.html#l00228">228</a> of file <a class="el" href="_collision_detection_8cpp_source.html">CollisionDetection.cpp</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00075">WoRB::Geometry::Body</a>, <a class="el" href="_quaternion_8h_source.html#l00290">WoRB::Quaternion::ComponentWiseProduct()</a>, <a class="el" href="_quaternion_8h_source.html#l00307">WoRB::Quaternion::Dot()</a>, <a class="el" href="_geometry_8h_source.html#l00241">HalfExtent</a>, <a class="el" href="_collision_resolver_8h_source.html#l00099">WoRB::CollisionResolver::HasSpaceForMoreContacts()</a>, <a class="el" href="_collision_resolver_8h_source.html#l00127">WoRB::CollisionResolver::RegisterNewContact()</a>, and <a class="el" href="_rigid_body_8h_source.html#l00075">WoRB::RigidBody::ToWorld</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> En = <a class="code" href="class_wo_r_b_1_1_geometry.html#afeb3203ee26b6c8af56f5959248dd9c8" title="Gets the unit base vector (axes) of the geometry, given by the index.">Axis</a>( axis );
    <span class="keywordtype">bool</span> onRight = En.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a90a69e3155a5b9593bbe0b764e62a583" title="Returns a scalar product of the vector parts of this and another quaternion.">Dot</a>( displacement ) &gt; 0;

    <span class="comment">// Go through each combination of +/- for each half-size</span>
    <span class="comment">//</span>
    <span class="keywordtype">unsigned</span> contactCount = 0;

    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> i = 0; i &lt; 8 &amp;&amp; owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#a851f8a287fca3878e792372c90b93af4" title="Checks if there is a free space available for more contact data.">HasSpaceForMoreContacts</a> (); ++i )
    {
        <span class="comment">// Calculate the position of each vertex</span>
        <span class="comment">//</span>
        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> vertices[8][3] = 
        {
            { 1, 1,  1 }, { -1, 1,  1 }, { 1, -1,  1 }, { -1, -1,  1 },
            { 1, 1, -1 }, { -1, 1, -1 }, { 1, -1, -1 }, { -1, -1, -1 }
        };
        <a class="code" href="class_wo_r_b_1_1_quaternion.html" title="Encapsulates Hamilton real quaternions.">Quaternion</a> vertexPos( 0, vertices[i][0], vertices[i][1], vertices[i][2] );
        vertexPos = vertexPos.ComponentWiseProduct( B.<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a> );
        vertexPos = B.<a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#ab4140317241df453398dd238eae87616" title="Holds a combined translation/rotation matrix for converting from body-fixed local coordinates into wo...">ToWorld</a>( vertexPos );

        <span class="comment">// Calculate the distance between the B&#39;s vertex and the A&#39;s center</span>
        <span class="comment">// projected on A&#39;s axis</span>
        <span class="comment">//</span>
        <span class="keywordtype">double</span> distance = ( vertexPos - <a class="code" href="class_wo_r_b_1_1_geometry.html#a059748655df2238d6e50e1f4a58297e2" title="Gets the position vector of the geometry.">Position</a>() ).Dot( En );

        <span class="comment">// Compare this to the A&#39;s face distance from A&#39;s center</span>
        <span class="comment">//</span>
        <span class="keywordflow">if</span> ( ( onRight &amp;&amp; distance &lt;= <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[ axis ] )
          || ( !onRight &amp;&amp; distance &gt;= -<a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[ axis ] ) )
        {
            <span class="comment">// New contact with the vertex as the point of contact</span>
            <span class="comment">//</span>
            contactCount += owner.<a class="code" href="class_wo_r_b_1_1_collision_resolver.html#ade26bbf8d0c4bfd3ede0f7486e439ff8" title="Registers a new contact.">RegisterNewContact</a>(
                <span class="comment">/* a */</span> <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
                <span class="comment">/* b */</span> B.<a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>,
                <span class="comment">/* X */</span> vertexPos,
                <span class="comment">/* N */</span> onRight ? -En : En,
                <span class="comment">/* d */</span> onRight ? <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[ axis ] - distance
                                : distance - <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>[ axis ]
            );
        }
    }

    <span class="keywordflow">return</span> contactCount;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a21f09fa55d5adc0837e04b1759f9ea07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_wo_r_b_1_1_cuboid.html#a21f09fa55d5adc0837e04b1759f9ea07">WoRB::Cuboid::SetMass</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mass</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets body mass and principal moment of inertia of the cuboid. </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00252">252</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00075">WoRB::Geometry::Body</a>, <a class="el" href="_rigid_body_8h_source.html#l00221">WoRB::RigidBody::CalculateDerivedQuantities()</a>, <a class="el" href="_quaternion_8h_source.html#l00290">WoRB::Quaternion::ComponentWiseProduct()</a>, <a class="el" href="_geometry_8h_source.html#l00241">HalfExtent</a>, <a class="el" href="_rigid_body_8h_source.html#l00324">WoRB::RigidBody::SetMomentOfInertia()</a>, <a class="el" href="_rigid_body_8h_source.html#l00280">WoRB::RigidBody::SetupMass()</a>, <a class="el" href="_quaternion_8h_source.html#l00040">WoRB::Quaternion::x</a>, <a class="el" href="_quaternion_8h_source.html#l00041">WoRB::Quaternion::y</a>, and <a class="el" href="_quaternion_8h_source.html#l00042">WoRB::Quaternion::z</a>.</p>

<p>Referenced by <a class="el" href="_utilities_8h_source.html#l00392">WoRB::Box::Box()</a>, and <a class="el" href="_wo_r_b___test_bed_8cpp_source.html#l00816">WoRB_TestBed::ReconfigureTestBed()</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a97a4e9b3b34381ceb63d7f175a4d1660" title="Sets the mass of the rigid body.">SetupMass</a>( mass );

            Quaternion extent = 2.0 * <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>;
            Quaternion sq = extent.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a04127f7ff91f152f06804477cf8e4ad5" title="Returns a component-wise product of this and another quaternion.">ComponentWiseProduct</a>( extent );

            <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a3edd068aef02e71ed11c0f3045c2c361" title="Sets the intertia tensor for the rigid body.">SetMomentOfInertia</a>( QTensor(
                mass * ( sq.y + sq.z ) / 12,
                mass * ( sq.x + sq.z ) / 12,
                mass * ( sq.x + sq.y ) / 12
            ) );

            <a class="code" href="class_wo_r_b_1_1_geometry.html#a2d6b8f9a139f6c44b6214b93be12dd47" title="The rigid body that is represented by this geometry.">Body</a>-&gt;<a class="code" href="class_wo_r_b_1_1_rigid_body.html#a09e549a786fcb43c9add018c75d9454f" title="Normalizes orientation and calculates derived quantities from the state variables.">CalculateDerivedQuantities</a>( <span class="comment">/*fromMomenta*/</span> <span class="keyword">false</span> );
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ae5397916e2956a422587b68b83b034a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_wo_r_b_1_1_cuboid.html#ae5397916e2956a422587b68b83b034a1">WoRB::Cuboid::Volume</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the volume of the cuboid. </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00245">245</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>References <a class="el" href="_geometry_8h_source.html#l00241">HalfExtent</a>, <a class="el" href="_quaternion_8h_source.html#l00040">WoRB::Quaternion::x</a>, <a class="el" href="_quaternion_8h_source.html#l00041">WoRB::Quaternion::y</a>, and <a class="el" href="_quaternion_8h_source.html#l00042">WoRB::Quaternion::z</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">return</span> 8.0 * <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a28802efcda7cc375d5a45d3be1eaefc3" title="Holds i-component of the pure imaginary (vector) part.">x</a> * <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#a6f8cac6c6ca2425471915fa8a3f4197e" title="Holds j-component of the pure imaginary (vector) part.">y</a> * <a class="code" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd" title="Holds the half-extent of the cuboid along each of its local axes.">HalfExtent</a>.<a class="code" href="class_wo_r_b_1_1_quaternion.html#ac8db915c9c1fd87c962bc540731011f4" title="Holds k-component of the pure imaginary (vector) part.">z</a>;
        }
</pre></div>
</div>
</div>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a9ecf78f593c8a6f2e9916669ae14a9bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_wo_r_b_1_1_quaternion.html">Quaternion</a> <a class="el" href="class_wo_r_b_1_1_cuboid.html#a9ecf78f593c8a6f2e9916669ae14a9bd">WoRB::Cuboid::HalfExtent</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Holds the half-extent of the cuboid along each of its local axes. </p>

<p>Definition at line <a class="el" href="_geometry_8h_source.html#l00241">241</a> of file <a class="el" href="_geometry_8h_source.html">Geometry.h</a>.</p>

<p>Referenced by <a class="el" href="_utilities_8h_source.html#l00392">WoRB::Box::Box()</a>, <a class="el" href="_collision_detection_8cpp_source.html#l00351">Check()</a>, <a class="el" href="_wo_r_b___test_bed_8cpp_source.html#l00103">WoRB_TestBed::Dump()</a>, <a class="el" href="_geometry_8h_source.html#l00344">ProjectOn()</a>, <a class="el" href="_collision_detection_8cpp_source.html#l00283">RegisterContactOnAxis()</a>, <a class="el" href="_collision_detection_8cpp_source.html#l00228">RegisterContactOnAxis_Thorough()</a>, <a class="el" href="_utilities_8h_source.html#l00434">WoRB::Box::Render()</a>, <a class="el" href="_utilities_8h_source.html#l00462">WoRB::Box::RenderWireframe()</a>, <a class="el" href="_geometry_8h_source.html#l00252">SetMass()</a>, and <a class="el" href="_geometry_8h_source.html#l00245">Volume()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_geometry_8h_source.html">Geometry.h</a></li>
<li><a class="el" href="_collision_detection_8cpp_source.html">CollisionDetection.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_wo_r_b.html">WoRB</a>      </li>
      <li class="navelem"><a class="el" href="class_wo_r_b_1_1_cuboid.html">Cuboid</a>      </li>

    <li class="footer">Generated on Sun Feb 24 2013 14:18:28 for World of Rigid Bodies (WoRB) by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
